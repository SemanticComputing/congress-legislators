!function(){"use strict";angular.module("facetApp",["ui.router","seco.facetedSearch","ngTable","angular.filter","ngAnimate","ui.bootstrap","infinite-scroll","uiGmapgoogle-maps","rzModule"]).constant("_",_).constant("RESULTS_PER_PAGE",25).constant("PAGES_PER_QUERY",1).value("SPARQL_ENDPOINT_URL","https://ldf.fi/congress/sparql").run(["authStorage",function(a){a.init()}]).config(["$urlMatcherFactoryProvider",function(a){a.strictMode(!1)}]).config(["$urlRouterProvider",function(a){a.when("","/grid")}]).service("authInterceptor",["$q","$state",function(a,b){this.responseError=function(c){return 401==c.status&&b.go("login"),a.reject(c)}}]).config(["$httpProvider",function(a){a.interceptors.push("authInterceptor")}]).config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginController",controllerAs:"vm"}).state("person",{"abstract":!0,url:"/:personId",templateUrl:"views/person.html"}).state("person.detail",{url:"",templateUrl:"views/detail.html",controller:"DetailController",controllerAs:"vm"}).state("person.map",{url:"/kartta",templateUrl:"views/map.html",controller:"MapController",controllerAs:"vm"}).state("table",{url:"/list",templateUrl:"views/table.html",controller:"TableController",controllerAs:"vm"}).state("groupmap",{url:"/groupmap",templateUrl:"views/groupmap.html",controller:"GroupmapController",controllerAs:"vm"}).state("cards",{url:"/grid",templateUrl:"views/cards.html",controller:"CardsController",controllerAs:"vm"}).state("visualizations",{"abstract":!0}).state("visualizations.visu",{url:"/visualisointi",templateUrl:"views/visu.html",controller:"VisuController",controllerAs:"vm"}).state("visualizations.visu2",{url:"/visualisointi2",templateUrl:"views/visu2.html",controller:"VisuController2",controllerAs:"vm"})}])}(),function(){"use strict";angular.module("facetApp").service("authStorage",["$window","$http",function(a,b){function c(){var a=f();a&&e(a)}function d(){a.sessionStorage.removeItem("sparqlAuthToken")}function e(c){return b.defaults.headers.common.Authorization="Basic "+c,a.sessionStorage.setItem("sparqlAuthToken",c)}function f(){return a.sessionStorage.getItem("sparqlAuthToken")}this.init=c,this.setToken=e,this.getToken=f,this.clearToken=d}])}(),function(){"use strict";function a(a,b,c,d){function e(a,e){c.clearToken();var f=btoa(a+":"+e),g={headers:{Authorization:"Basic "+f}};return b.get(d+"?query=ASK{}",g).then(function(){return c.setToken(f),!0})["catch"](function(){return!1})}this.login=e}angular.module("facetApp").service("loginService",a),a.$inject=["$q","$http","authStorage","SPARQL_ENDPOINT_URL"]}(),function(){"use strict";angular.module("facetApp").filter("castArray",["_",function(a){return function(b){return a.castArray(b)}}])}(),function(){"use strict";function a(a,b,c){function d(){this.objectClass=Object}function e(a){return a.forEach(function(a){a.hasImage=!!a.images,a.images=a.images?b.castArray(a.images):["images/person_placeholder.64200c6c.svg"],a.hasOwnProperty("wikipedia")&&(a.wikipedia="https://en.wikipedia.org/wiki/"+a.wikipedia),a.hasOwnProperty("twitter")&&(a.twitter="https://twitter.com/"+a.twitter),a.hasOwnProperty("committee")&&(a.committee.label=a.committee.label+"\n"+a.prefLabel)}),a}d.prototype.postProcess=e;var f=Object.getPrototypeOf(c);return d.prototype=angular.extend({},f,d.prototype),new d}angular.module("facetApp").factory("personMapperService",a),a.$inject=["$sce","_","objectMapperService"]}(),function(){"use strict";function a(a,b,c){function d(){this.objectClass=Object}function e(a){return a}d.prototype.postProcess=e;var f=Object.getPrototypeOf(c);return d.prototype=angular.extend({},f,PersonMapper.prototype),new d}angular.module("facetApp").factory("eventMapperService",a),a.$inject=["$sce","_","objectMapperService"]}(),function(){"use strict";function a(a,b){function c(){this.objectClass=Object}function d(b){var c=new this.objectClass;c.value=a.get(b,"value.value");var d=parseInt(c.value);return c.text=d?d:a.get(b,"facet_text.value"),c.count=b.cnt?parseInt(b.cnt.value):void 0,c}c.prototype.makeObject=d;var e=Object.getPrototypeOf(b);return c.prototype=angular.extend({},e,c.prototype),new c}angular.module("facetApp").factory("numericFacetMapperService",a),a.$inject=["_","facetMapperService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(a){return w.getResults(a,n())}function j(b){var c=q+s,d="VALUES ?id { <"+b+"> } . ";return x.getObjects(c.replace("<RESULT_SET>",d)).then(function(b){return b.length?b[b.length-1]:a.reject("Not found")})}function k(){var b=angular.copy(p);return a.when(b)}function l(){return u}function m(a){var c=b.search().sortBy||"?birthDate";c===a&&b.search("desc",b.search().desc?null:!0),b.search("sortBy",a)}function n(){var a=b.search().sortBy;c.isString(a)||(a="?birthDate");var d;return d=b.search().desc?"DESC("+a+")":a,"?birthDate"===a?d:d+" ?birthDate"}function o(a,c){var d=b.search().sortBy||"?birthDate",e=c?"icon-sort-by-past":"icon-sort-by-alphabet";return d===a?b.search().desc?e+"-alt":e:void 0}this.getResults=i,this.getFacets=k,this.getFacetOptions=l,this.updateSortBy=m,this.getSortClass=o,this.getPerson=j;var p={entryText:{facetId:"entryText",graph:"<http://ldf.fi/congress/people>",name:"Search",enabled:!0},slider:{facetId:"slider",name:"Timeline: 1st (1789) - 115th (2018) Congresses",predicate:"<http://ldf.fi/congress/icpsr_id>/^<http://ldf.fi/congress/icpsr_id>/<http://ldf.fi/congress/congress_number>",enabled:!0},link:{facetId:"link",choices:[{id:"wikipedia",pattern:"?id <http://ldf.fi/congress/wikipedia_id> [] .",label:"Wikipedia"},{id:"dbpedia",pattern:"?id <http://ldf.fi/congress/dbpedia_id> [] .",label:"DBpedia"},{id:"twitter",pattern:"?id <http://ldf.fi/congress/twitter> [] .",label:"Twitter"}],enabled:!0,name:"Links"},familyName:{facetId:"familyName",predicate:"<http://schema.org/familyName>",name:"Family Name"},givenName:{facetId:"givenName",predicate:"<http://schema.org/givenName>",name:"First Name"},birthDate:{facetId:"birthDate",predicate:"<http://schema.org/birthDate>"},deathDate:{facetId:"deathDate",predicate:"<http://schema.org/deathDate>"},birthPlace:{facetId:"birthPlace",predicate:"<http://schema.org/birthPlace>",name:"Place of Birth",hierarchy:"<http://schema.org/containedInPlace>",depth:5},gender:{facetId:"gender",predicate:"<http://schema.org/gender>",name:"Gender"},occupation:{facetId:"occupation",predicate:"<http://schema.org/hasOccupation>",name:"Occupation"},state:{facetId:"state",predicate:"<http://schema.org/state>",name:"Representing State",enabled:!0},memberOf:{facetId:"memberOf",predicate:"<http://schema.org/memberOf>",name:"Political Party",enabled:!0},type:{facetId:"type",predicate:"<http://ldf.fi/congress/type>",name:"Type of Congress",enabled:!0},congress_number:{facetId:"congress_number",predicate:"<http://ldf.fi/congress/icpsr_id>/^<http://ldf.fi/congress/icpsr_id>/<http://ldf.fi/congress/congress_number>",name:"Serving Record of the Period",mapper:h}},q=" PREFIX owl: <http://www.w3.org/2002/07/owl#>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX dct: <http://purl.org/dc/terms/>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX xml: <http://www.w3.org/XML/1998/namespace>  PREFIX congress: <http://ldf.fi/congress/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>  PREFIX wdt: <http://www.wikidata.org/prop/direct/>  PREFIX geo:   <http://www.w3.org/2003/01/geo/wgs84_pos#>  PREFIX wd_ent: <http://www.wikidata.org/entity/> ",r=" SELECT DISTINCT * WHERE {  {     <RESULT_SET>   }   	OPTIONAL { ?id schema:familyName ?familyName . }  	OPTIONAL { ?id schema:givenName ?givenName . }  	OPTIONAL { ?id rdfs:comment ?short_description . }   OPTIONAL { ?id schema:birthDate ?birthDate . }     OPTIONAL { ?id schema:birthPlace/rdfs:label ?birthPlace . }     OPTIONAL { ?id schema:deathDate ?deathDate . }     OPTIONAL { ?id schema:deathPlace/rdfs:label ?deathPlace . }      OPTIONAL { ?id congress:twitter ?twitter . }   OPTIONAL { ?id congress:wikipedia_id ?wikipedia . }   OPTIONAL { ?id congress:dbpedia_id ?dbpedia . }  	OPTIONAL { ?id schema:gender ?gender . }  	OPTIONAL { ?id schema:image ?images . }	OPTIONAL { ?id schema:hasOccupation ?occupation . }	OPTIONAL { ?id congress:type ?type . } OPTIONAL { ?id congress:icpsr_id/^congress:icpsr_id/congress:congress_number ?congress_number . } }",s='SELECT DISTINCT * WHERE {  {     <RESULT_SET>   }   OPTIONAL { ?id schema:familyName ?familyName . }   OPTIONAL { ?id schema:givenName ?givenName . }   OPTIONAL { ?id schema:description ?description . }   OPTIONAL { ?id schema:birthDate ?birthDate . }   OPTIONAL { ?id schema:birthPlace/rdfs:label ?birthPlace . }   OPTIONAL { ?id schema:deathDate ?deathDate . }   OPTIONAL { ?id schema:deathPlace/rdfs:label ?deathPlace . }   OPTIONAL { ?id congress:wikipedia_id ?wikipedia . }   OPTIONAL { ?id congress:wikidata ?wikidata . }   OPTIONAL { ?id congress:dbpedia_id ?dbpedia . }   OPTIONAL { ?id congress:twitter ?twitter . }   OPTIONAL { ?id schema:gender ?gender . }   OPTIONAL { ?id schema:image ?images . }   OPTIONAL { ?id schema:hasOccupation ?occupation . }   OPTIONAL { ?id congress:bioguide_id ?committee__id .   ?mship congress:bioguide_id ?committee__id ;   congress:committee ?committee__label ;   schema:memberOf ?committee__memberOf.   ?congress skos:prefLabel ?prefLabel;   skos:altLabel ?altLabel.   FILTER regex(str(?congress), "/go").   FILTER (str(?altLabel) = str(?committee__label)). }}',t={endpointUrl:e,usePost:!0},u={endpointUrl:t.endpointUrl,rdfClass:"<http://schema.org/Person>",constraint:"?id <http://schema.org/familyName> ?familyName . ?id <http://schema.org/givenName> ?givenName . ?id <http://schema.org/birthDate> ?birthDate . ",preferredLang:"en",noSelectionString:"-- No selection --"},v={mapper:g,queryTemplate:r,prefixes:q,paging:!0,pagesPerQuery:2},w=new d(t,v),x=new f(t,g)}angular.module("facetApp").service("nbfService",a),a.$inject=["$q","$location","_","FacetResultHandler","SPARQL_ENDPOINT_URL","AdvancedSparqlService","personMapperService","numericFacetMapperService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(b){var c=m+n,d="VALUES ?idorg { <"+b+"> } . ?idorg owl:sameAs* ?pc . ";return q.getObjects(c.replace("<RESULT_SET>",d)).then(function(b){return b.length?b:a.reject("No events found")})}function i(){var b=angular.copy(facets);return a.when(b)}function j(){return facetOptions}function k(a){var c=b.search().sortBy||"?ordinal";c===a&&b.search("desc",b.search().desc?null:!0),b.search("sortBy",a)}function l(a,c){var d=b.search().sortBy||"?ordinal",e=c?"glyphicon-sort-by-order":"glyphicon-sort-by-alphabet";return d===a?b.search().desc?e+"-alt":e:void 0}this.getFacets=i,this.getFacetOptions=j,this.updateSortBy=k,this.getSortClass=l,this.getEvents=h;var m=" PREFIX owl: <http://www.w3.org/2002/07/owl#>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX dct: <http://purl.org/dc/terms/>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX xml: <http://www.w3.org/XML/1998/namespace>  PREFIX bioc: <http://ldf.fi/schema/bioc/>  PREFIX nbf: <http://ldf.fi/nbf/>  PREFIX categories: <http://ldf.fi/nbf/categories/>  PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>  PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>  PREFIX gvp: <http://vocab.getty.edu/ontology#> ",n=' SELECT DISTINCT * WHERE {  {     <RESULT_SET>   }   ?pc a nbf:PersonConcept ;       foaf:focus ?prs ;   		skosxl:prefLabel ?ilabel .   OPTIONAL { ?ilabel schema:givenName ?givenName }   OPTIONAL { ?ilabel schema:familyName ?familyName }   { ?pc bioc:has_family_relation ?id . 		?id bioc:inheres_in ?relative }   UNION   { ?id crm:P100_was_death_of ?prs . }   UNION   { ?id crm:P98_brought_into_life ?prs . }   UNION   { ?id bioc:inheres_in ?prs . }    ?id a/skos:prefLabel ?class . FILTER (lang(?class)="en")   ?id nbf:time ?time . 		OPTIONAL { ?time gvp:estStart ?time__start. }   		OPTIONAL { ?time gvp:estEnd ?time__end. }   		OPTIONAL { ?time skos:prefLabel ?time__label. }   	    BIND ( CONCAT(	        IF(bound(?time__start),str(year(?time__start)),"")	        ,"-", 	        IF(bound(?time__end),str(year(?time__end)),"")	      ) AS ?time__span)   OPTIONAL { ?id skos:prefLabel ?label }   OPTIONAL { ?id nbf:place ?place__uri .     	?place__uri geo:lat ?place__latitude ;             geo:long ?place__longitude  ;    		skos:prefLabel ?place__name .  }  } ORDER BY ?time__start DESC(?time__end)',o={endpointUrl:e,usePost:!0},p={mapper:g,queryTemplate:n,prefixes:m,paging:!0,pagesPerQuery:2},q=(new d(o,p),new f(o,g))}angular.module("facetApp").service("mapService",a),a.$inject=["$q","$location","_","FacetResultHandler","SPARQL_ENDPOINT_URL","AdvancedSparqlService","personMapperService"]}(),function(){"use strict";function a(){return{restrict:"E",scope:{options:"="},controller:"SliderFacetController",controllerAs:"vm",templateUrl:"views/sliderFacet.directive.html"}}function b(a,b,c,d,e,f){function g(){var c=a.$on(e,function(d,e){var g=b.cloneDeep(a.options);g.initial=e.facets,g.update=i,n.facet=new f(g),c()});a.$emit(d)}function h(){var b={id:n.facet.facetId,constraint:n.facet.getConstraint(),value:n.facet.getSelectedValue(),priority:n.facet.getPriority()};a.$emit(c,b)}function i(){h()}function j(){n.facet.clear(),h()}function k(){n.facet.enable()}function l(){n.facet.disable(),h()}function m(){return n.facet?n.facet.isEnabled():!1}var n=this;n.changed=i,n.clear=j,n.enableFacet=k,n.disableFacet=l,n.isFacetEnabled=m;var o=a.$watch("options",function(a){a&&(g(),o())})}function c(a){function b(b){var c={preferredLang:"en"};this.config=angular.extend({},c,b),this.name=this.config.name,this.facetId=this.config.facetId,this.predicate=this.config.predicate,this.config.enabled?this.enable():this.disable(),this.internalId=a.uniqueId();var d=parseInt(this.config.min)||1,e=parseInt(this.config.max)||115;this.slider={minValue:d,maxValue:e,options:{floor:d,ceil:e,step:1,draggableRange:!0,onEnd:this.config.update}};var f=a.get(b,"initial."+this.facetId+".value");f&&(this._isEnabled=!0,this.slider.minValue=f.min,this.slider.maxValue=f.max)}function c(){var a=this.slider.minValue,b=this.slider.maxValue,c="?slider_"+this.internalId,d="?id <PREDICATE> <OBJ> . FILTER (<START><=ABS(<OBJ>) && ABS(<OBJ>)<=<END>) ".replace(/<OBJ>/g,c).replace(/<PREDICATE>/g,this.predicate).replace("<START>",a).replace("<END>",b);return d}function d(){return this.config.preferredLang}function e(){return{min:this.slider.minValue,max:this.slider.maxValue}}function f(){return this.config.priority}function g(){}function h(){return this._isEnabled}function i(){this._isEnabled=!0}function j(){this.selectedValue=void 0,this._isEnabled=!1}return b.prototype.getConstraint=c,b.prototype.getPriority=f,b.prototype.getPreferredLang=d,b.prototype.disable=j,b.prototype.enable=i,b.prototype.clear=g,b.prototype.isEnabled=h,b.prototype.getSelectedValue=e,b}angular.module("seco.facetedSearch").factory("SliderFacet",c).controller("SliderFacetController",b).directive("secoSliderFacet",a),b.$inject=["$scope","_","EVENT_FACET_CHANGED","EVENT_REQUEST_CONSTRAINTS","EVENT_INITIAL_CONSTRAINTS","SliderFacet"],c.$inject=["_"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(a){var b=o+p.replace("<RESULT_SET>",a.constraint.join(" "));return t.getObjectsNoGrouping(b)}function j(){var b=angular.copy(n);return a.when(b)}function k(){return r}function l(a){var c=b.search().sortBy||"?birthDate";c===a&&b.search("desc",b.search().desc?null:!0),b.search("sortBy",a)}function m(a,c){var d=b.search().sortBy||"?birthDate",e=c?"icon-sort-by-past":"icon-sort-by-alphabet";return d===a?b.search().desc?e+"-alt":e:void 0}this.getResults=i,this.getFacets=j,this.getFacetOptions=k,this.updateSortBy=l,this.getSortClass=m;var n={entryText:{facetId:"entryText",graph:"<http://ldf.fi/congress/people>",name:"Search",enabled:!0},slider:{facetId:"slider",name:"Timeline: 1st (1789) - 115th (2018) Congresses",predicate:"<http://ldf.fi/congress/icpsr_id>/^<http://ldf.fi/congress/icpsr_id>/<http://ldf.fi/congress/congress_number>",enabled:!0},link:{facetId:"link",choices:[{id:"wikipedia",pattern:"?id <http://ldf.fi/congress/wikipedia_id> [] .",label:"Wikipedia"},{id:"dbpedia",pattern:"?id <http://ldf.fi/congress/dbpedia_id> [] .",label:"DBpedia"},{id:"twitter",pattern:"?id <http://ldf.fi/congress/twitter> [] .",label:"Twitter"}],enabled:!0,name:"Links"},familyName:{facetId:"familyName",predicate:"<http://schema.org/familyName>",name:"Family Name"},givenName:{facetId:"givenName",predicate:"<http://schema.org/givenName>",name:"First Name"},birthPlace:{facetId:"birthPlace",predicate:"<http://schema.org/birthPlace>",name:"Place of Birth",hierarchy:"<http://schema.org/containedInPlace>",depth:5,enabled:!0},gender:{facetId:"gender",predicate:"<http://schema.org/gender>",name:"Gender"},occupation:{facetId:"occupation",predicate:"<http://schema.org/hasOccupation>",name:"Occupation"},state:{facetId:"state",predicate:"<http://schema.org/state>",name:"Representing State",enabled:!0},memberOf:{facetId:"memberOf",predicate:"<http://schema.org/memberOf>",name:"Political Party",enabled:!0},type:{facetId:"type",predicate:"<http://ldf.fi/congress/type>",name:"Type of Congress",enabled:!0},congress_number:{facetId:"congress_number",predicate:"<http://ldf.fi/congress/icpsr_id>/^<http://ldf.fi/congress/icpsr_id>/<http://ldf.fi/congress/congress_number>",name:"Serving Record of the Period",mapper:h}},o="PREFIX owl: <http://www.w3.org/2002/07/owl#>   PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>   PREFIX schema: <http://schema.org/>   PREFIX dct: <http://purl.org/dc/terms/>   PREFIX skos: <http://www.w3.org/2004/02/skos/core#>   PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>   PREFIX xml: <http://www.w3.org/XML/1998/namespace>   PREFIX congress: <http://ldf.fi/congress/>   PREFIX foaf: <http://xmlns.com/foaf/0.1/>   PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>   PREFIX wdt: <http://www.wikidata.org/prop/direct/> PREFIX geo:   <http://www.w3.org/2003/01/geo/wgs84_pos#> PREFIX wd_ent: <http://www.wikidata.org/entity/> ",p='SELECT DISTINCT ?id ?person__name ?place__label ?time__start ?time__end ?class ?place__uri ?place__latitude ?place__longitude ?congress_number WHERE {   { <RESULT_SET> }   VALUES (?evt_place ?evt_time ?class) {   	(schema:birthPlace schema:birthDate "Birth"@en)   	(schema:deathPlace schema:deathDate "Death"@en) 	}    OPTIONAL { ?id schema:familyName ?familyName . }   OPTIONAL { ?id schema:givenName ?givenName . }   BIND (CONCAT(?givenName, " ",?familyName) AS ?person__name)   ?id congress:icpsr_id/^congress:icpsr_id/congress:congress_number ?congress_number .    ?id ?evt_place ?place__uri ;   		?evt_time ?time__start ;     	?evt_time ?time__end .   BIND (RAND() AS ?rand)   ?place__uri geo:lat ?place__latitude ;    geo:long ?place__longitude ;   rdfs:label ?place__label . } ORDER BY ?rand LIMIT 500 ';console.log(p);var q={endpointUrl:e,usePost:!0},r={endpointUrl:q.endpointUrl,rdfClass:"<http://schema.org/Person>",constraint:"?id <http://schema.org/familyName> ?familyName . ?id <http://schema.org/givenName> ?givenName . ?id <http://schema.org/birthDate> ?birthDate . ",preferredLang:"en",noSelectionString:"-- no selection --"},s={mapper:g,queryTemplate:p,prefixes:o,paging:!1,pagesPerQuery:1},t=(new d(q,s),new f(q,g))}angular.module("facetApp").service("groupmapService",a),a.$inject=["$q","$location","_","FacetResultHandler","SPARQL_ENDPOINT_URL","AdvancedSparqlService","personMapperService","numericFacetMapperService"]}(),function(){"use strict";function a(a,b,c,d){function e(a,d){var e="navbar-fi.html";return b(e).then(function(a){return d.html(a),b("views/subnavbar.html")}).then(function(b){return angular.element("#subnav").html(b),c(d.contents())(a)})}function f(){function a(){d.open({templateUrl:"views/help.html",size:"lg"})}var b=this;b.showHelp=a}return{link:e,controller:f,controllerAs:"vm"}}angular.module("facetApp").directive("wsNavbar",a),a.$inject=["$location","$templateRequest","$compile","$uibModal"]}(),function(){"use strict";function a(a,b,c){function d(){return c.login(e.un,e.pw).then(function(c){return c?a.transitionTo("cards",b,{reload:!0,inherit:!1,notify:!0}):void(e.error="Failed to log in")})}var e=this;e.login=d}angular.module("facetApp").controller("LoginController",a),a.$inject=["$state","$stateParams","loginService"]}(),function(){"use strict";function a(a,b,c,d){function e(){d.getPerson(a.personId).then(function(a){return h.person=a,a})["catch"](g)}function f(){b.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return h.person}}})}function g(a){h.isLoadingResults=!1,h.error=a}var h=this;h.openPage=f,e()}angular.module("facetApp").controller("DetailController",a),a.$inject=["$stateParams","$uibModal","_","nbfService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){b.reload()}function k(){r.tableParams=new g({count:e},{getData:n})}function l(a){c.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return a}}})}function m(){var a=f.getFacetOptions();return a.initialState=i.getFacetValuesFromUrlParams(),a}function n(a){return r.isLoadingResults=!0,console.log(r.pager),r.pager.getPage(a.page()-1,a.count()).then(function(a){return r.pager.getTotalCount().then(function(b){return r.tableParams.total(b),a}).then(function(a){return r.isLoadingResults=!1,a})})}function o(a,b){return i.updateUrlParams(b),r.previousSelections=d.clone(b.constraint),p(b)}function p(b){r.isLoadingResults=!0,b.minYear=a.minRangeSlider.minValue,b.maxYear=a.minRangeSlider.maxValue,f.getResults(b).then(function(a){r.pager=a,r.tableParams?(r.tableParams.page(1),r.tableParams.reload()):k()})}function q(a){return f.updateSortBy(a),p({constraint:r.previousSelections})}a.minRangeSlider={minValue:(new Date).getFullYear()-300,maxValue:(new Date).getFullYear()-250,options:{floor:1720,ceil:(new Date).getFullYear(),step:10,draggableRange:!0,onEnd:function(){p({constraint:r.previousSelections})}}};var r=this;r.openPage=l,r.removeFacetSelections=j,r.sortBy=q,r.getSortClass=f.getSortClass;var s=a.$on("sf-initial-constraints",function(a,b){o(a,b),s()});a.$on("sf-facet-constraints",o),f.getFacets().then(function(b){r.facets=b,r.facetOptions=m(),r.facetOptions.scope=a,r.handler=new h(r.facetOptions)})}angular.module("facetApp").controller("TableController",a),a.$inject=["$scope","$state","$uibModal","_","RESULTS_PER_PAGE","nbfService","NgTableParams","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function a(a,b,c,d){function e(){d.getEvents(a.personId).then(function(a){return m.currentEvent=".",m.events=a,a.length&&(m.person=a[0]),m.events=f(a,m),m.viewBox="1930,-10,120,27",h(m),a})["catch"](k)}function f(a,b){var c=(new Date).getFullYear(),d=!1,e=0;b.min_time=c,b.max_time=0;var f={};a.forEach(function(a){a.place&&a.place.uri&&(["uri","latitude","longitude"].forEach(function(b){a.place[b]&&a.place[b].constructor!==Array&&(a.place[b]=[a.place[b]])}),a.place.uri.forEach(function(b){f.hasOwnProperty(b)||(f[b]={count:0,latitude:a.place.latitude,longitude:a.place.longitude,type:a["class"]}),f[b].count+=1}))});var h=[[],[],[],[]];return a.forEach(function(a){a.y=0,a.r=1,a.markers=[],a.blobs=[],a.time.span.constructor!==Array&&(a.time.span=[a.time.span]),a.time.span.forEach(function(c){var d=c.split("-"),e={};""!=d[0]&&(d[0]=parseInt(d[0]),d[0]<b.min_time&&(b.min_time=d[0]),b.max_time<d[0]&&(b.max_time=d[0]),e.estStart=d[0]),""!=d[1]&&(d[1]=parseInt(d[1]),d[1]<b.min_time&&(b.min_time=d[1]),b.max_time<d[1]&&(b.max_time=d[1]),e.estEnd=d[1]),a.blobs.push(e)}),a.label||(a.label=""),a["class"]||(a["class"]="event"),a["class"]=a["class"].toLowerCase();var c=0;switch(a["class"]){case"death":d=!0,a.label="Kuollut "+a.label,a.r=1.5;break;case"birth":a.label="Syntynyt "+a.label,a.place&&a.place.latitude&&(b.map.center={latitude:a.place.latitude[0],longitude:a.place.longitude[0]}),a.r=1.5,b.min_time<a.blobs[0].estStart&&(b.min_time=a.blobs[0].estStart);break;case"spouse":case"child":a.relative&&(a.relativelink="http://localhost:9000/#!/"+a.relative.replace(/[\/]/g,"~2F")),a.label=a.label+", "+a.time.label;break;case"career":a.y=5,c=1;break;case"product":a.y=10,c=2;break;case"honour":a.y=15,c=3;break;default:console.log(a["class"]),a.y=15,a["class"]="event",c=3}if(h[c].push(a),a.id=++e,a.place&&a.place.latitude)for(var i=0;i<a.place.latitude.length;i++){var j=a.place.uri[i]&&f[a.place.uri[i]]&&f[a.place.uri[i]].count?15*Math.sqrt(f[a.place.uri[i]].count):15,k=g(a.place.latitude[i],a.place.longitude[i],a.id,a["class"],j);a.markers.push(k),b.markers.push(k)}}),h.forEach(function(a){l(a).forEach(function(b){a[b].y+=2.5})}),d||(b.max_time+=15),b.max_time<=b.min_time&&(b.max_time=b.min_time+75),b.max_time>b.min_time+150&&(b.max_time=b.min_time+150),b.max_time>c&&(b.max_time=c),a.forEach(function(a){a.path="";var c=.1*Math.random();a.blobs.forEach(function(d){var e=d.estStart?i(d.estStart,b.min_time,b.max_time)+c:void 0,f=d.estEnd?i(d.estEnd,b.min_time,b.max_time)+c:void 0;e?f?a.path+="M"+e+","+(a.y-a.r)+" a"+a.r+","+a.r+",0,0,0,0,"+2*a.r+" H"+f+" a"+a.r+","+a.r+",0,0,0,0,-"+2*a.r+" Z":(f=e+3,a.path+="M"+f+","+(a.y-a.r)+" H"+e+" a"+a.r+","+a.r+",0,0,0,0,"+2*a.r+" H"+f):(e=f-3,a.path+="M"+e+","+(a.y+a.r)+" H"+f+" a"+a.r+","+a.r+",0,0,0,0,-"+2*a.r+" H"+e)}),a.blobs=[]}),a}function g(a,b,c,d,e){e||(e=15);var f={death:"#BF0A30",birth:"#002868",spouse:"#c3b981",child:"#7f6780",career:"#999999",product:"#83d236",honour:"#ce5c00",event:"#ABCDEF"},g={latitude:a,longitude:b,id:n++,options:{icon:{path:"M-"+e+" 0 A "+e+","+e+", 0 ,1, 1,"+e+",0 A"+e+","+e+",0,1,1,-"+e+",0 Z",scale:1,anchor:new google.maps.Point(0,0),fillColor:f[d],fillOpacity:.6,strokeOpacity:.5,strokeWeight:1,labelOrigin:new google.maps.Point(0,0)},zIndex:c,optimized:!1,label:{text:""+c,fontSize:"14px",fontFamily:'"Courier New", Courier,Monospace',color:"black"}}};return g}function h(a){for(var b=a.min_time,c=a.max_time,d=[],e=[],f=10*Math.ceil(b/10);c>f;f+=10){var g=i(f,b,c);d.push({x1:g,x2:g,y1:0,y2:15}),e.push({x:g,y:-3,year:""+f})}for(var h=0;20>h;h+=5)d.push({x1:i(b,b,c),x2:i(c,b,c),y1:h,y2:h});a.mainline={lines:d,texts:e}}function i(a,b,c){return a-b}function j(){b.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return m.person}}})}function k(a){m.isLoadingResults=!1,m.error=a}function l(a){for(var b={},c=a.length,d=0;c>d;d++)a[d].blobs.forEach(function(a){for(var c=a.estStart?a.estStart:a.estEnd-3,e=a.estEnd?a.estEnd:c+3,f=c;e>=f;f++)b[f]=d});var e=Array(c).fill(!1);for(var f in b)e[b[f]]=!0;for(var g=[],d=0;c>d;d++)e[d]||g.push(d);return g}var m=this;m.openPage=j,m.map={center:{latitude:62,longitude:24},zoom:6},m.markers=[],m.focusEvent=function(a){m.currentEvent=a.id+": "+a.label,a.markers.forEach(function(a){a.options.icon.strokeWeight=4,a.options.zIndex+=100,setTimeout(function(){a.options.animation=null},1200)})},m.unfocusEvent=function(a){m.currentEvent=".",a.markers.forEach(function(a){a.options.icon.strokeWeight=1,a.options.zIndex-=100})},e();var n=1}angular.module("facetApp").controller("MapController",a),a.$inject=["$stateParams","$uibModal","_","mapService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){c.reload()}function k(){var a=f.getFacetOptions();return a.initialState=h.getFacetValuesFromUrlParams(),a}function l(){return r.isLoadingResults||nextPageNo>maxPage}function m(a,b){return r.previousSelections&&e.isEqual(b.constraint,r.previousSelections)?void 0:(r.previousSelections=e.clone(b.constraint),h.updateUrlParams(b),n(b))}function n(a){r.isLoadingResults=!0,r.error=void 0;var b=e.uniqueId();return t=b,f.getResults(a).then(function(a){r.events=p(a,r)})["catch"](o)}function o(a){r.isLoadingResults=!1,r.error=a}function p(a,b){var c={};a.forEach(function(a){a["class"]||(a["class"]="event"),a["class"]=a["class"].toLowerCase();var b=a["class"]+a.place.uri;c.hasOwnProperty(b)||(c[b]={count:0,latitude:a.place.latitude,longitude:a.place.longitude,label:a.place.label,type:a["class"],people:{}}),c[b].count+=1,c[b].people[a.id]=a.person.name}),b.markers=[];var d=0;for(var e in c){var f=c[e],g=q(b,f.latitude,f.longitude,++d,f.type,f.count,f.label,f.people);b.markers.push(g)}b.markers.sort(function(a,b){return b.count-a.count});var h=new google.maps.LatLngBounds,i=document.getElementById("ui-gmap-google-map");return i&&i.fitBounds&&i.fitBounds(h),a}function q(b,c,d,e,f,g,h,i){var j=5*Math.sqrt(g),k={death:"#f3224e",birth:"#0045b5",spouse:"#c3b981",child:"#7f6780",career:"#999999",product:"#83d236",honour:"#ce5c00",event:"#ABCDEF"},l={count:g,latitude:c,longitude:d,id:e,options:{icon:{path:"M-"+j+" 0 A "+j+","+j+", 0 ,1, 1,"+j+",0 A"+j+","+j+",0,1,1,-"+j+",0 Z",scale:1,anchor:new google.maps.Point(0,0),fillColor:k[f],fillOpacity:.6,strokeOpacity:.2,strokeWeight:1,labelOrigin:new google.maps.Point(0,0)},optimized:!0},onClick:function(){b.place_label=h,"death"==f?b.place_label+="\nas a place of death":"birth"==f&&(b.place_label+="\nas a place of birth");var e=[];for(var g in i)e.push({uri:g,label:i[g]});b.people=e,b.window.position.lat=parseInt(c),b.window.position.lng=parseInt(d),b.showWindow(),a.$apply()}};return l}var r=this;r.map={center:{latitude:40,longitude:-90},zoom:4},r.markers=[],r.window={show:!1,position:{lat:40,lng:-90}},r.showWindow=function(){r.window.show=!0},r.closeWindow=function(){r.window.show=!1},r.isScrollDisabled=l,r.removeFacetSelections=j,r.getSortClass=f.getSortClass;var s=a.$on("sf-initial-constraints",function(a,b){m(a,b),s()});a.$on("sf-facet-constraints",m),f.getFacets().then(function(b){r.facets=b,r.facetOptions=k(),r.facetOptions.scope=a,r.handler=new g(r.facetOptions)});var t}angular.module("facetApp").controller("GroupmapController",a),a.$inject=["$scope","$location","$state","$uibModal","_","groupmapService","FacetHandler","facetUrlStateHandlerService","EVENT_FACET_CHANGED"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){c.reload()}function j(a){d.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return a}}})}function k(){var a=f.getFacetOptions();return a.initialState=h.getFacetValuesFromUrlParams(),a}function l(){var a=e.uniqueId();v=a,t.isLoadingResults=!0,r++<=s?t.pager.getPage(r-1,24).then(function(b){a===v&&(t.people=t.people.concat(b),t.isLoadingResults=!1)})["catch"](q):t.isLoadingResults=!1}function m(){return t.isLoadingResults||r>s}function n(a){return f.updateSortBy(a),p({constraint:t.previousSelections})}function o(a,b){return t.previousSelections&&e.isEqual(b.constraint,t.previousSelections)?void 0:(t.previousSelections=e.clone(b.constraint),h.updateUrlParams(b),p(b))}function p(a){t.isLoadingResults=!0,t.people=[],t.error=void 0;var b=e.uniqueId();w=b,r=0,f.getResults(a).then(function(a){return a.getMaxPageNo().then(function(b){return[a,b]})}).then(function(a){return w===b?(t.pager=a[0],s=a[1],t.isLoadingResults=!1,l()):void 0})["catch"](q)}function q(a){t.isLoadingResults=!1,t.error=a}var r,s,t=this;t.openPage=j,t.nextPage=l,t.isScrollDisabled=m,t.removeFacetSelections=i,t.sortBy=n,t.getSortClass=f.getSortClass,t.people=[];var u=a.$on("sf-initial-constraints",function(a,b){o(a,b),u()});a.$on("sf-facet-constraints",o),f.getFacets().then(function(b){t.facets=b,t.facetOptions=k(),t.facetOptions.scope=a,t.handler=new g(t.facetOptions)});var v,w}angular.module("facetApp").controller("CardsController",a),a.$inject=["$scope","$location","$state","$uibModal","_","nbfService","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){
function i(){d.reload()}function j(){var a=f.getFacetOptions();return a.initialState=h.getFacetValuesFromUrlParams(),a}function k(a,b){return r.previousSelections&&e.isEqual(b.constraint,r.previousSelections)?void 0:(r.previousSelections=e.clone(b.constraint),h.updateUrlParams(b),p(b).then(function(a){google.charts.setOnLoadCallback(function(){l("occupation","Myöhempi arvo tai ammatti","chart_occupation")}),google.charts.setOnLoadCallback(function(){l("organization","Työnantajat tai jäsenyydet järjestöissä","chart_organization")}),google.charts.setOnLoadCallback(function(){l("eduorganization","Opiskelupaikkoja Norssin jälkeen","chart_eduorganization")}),google.charts.setOnLoadCallback(function(){l("education","Koulutus Norssin jälkeen","chart_education")}),google.charts.setOnLoadCallback(m)}))}function l(a,b,c){var d=n(r.people,a),e=google.visualization.arrayToDataTable([[b,"Lukumäärä"]].concat(d)),f={title:b},g=new google.visualization.PieChart(document.getElementById(c));g.draw(e,f)}function m(){var a="education",b="eduorganization",c={},d={},e=10;$.each(r.people,function(e,f){if(f.hasOwnProperty(a)&&f.hasOwnProperty(b)){var g=f[a],h=f[b];c.hasOwnProperty(g)?c[g]+=1:c[g]=1,d.hasOwnProperty(h)?d[h]+=1:d[h]=1}}),c=$.map(c,function(a,b){return[[b,a]]}).sort(function(a,b){return b[1]-a[1]}),d=$.map(d,function(a,b){return[[b,a]]}).sort(function(a,b){return b[1]-a[1]});var f={},g={};$.each(c,function(a,b){f[b[0]]={index:e-1>a?a:e-1}}),$.each(d,function(a,b){g[b[0]]={index:e-1>a?a:e-1}});var h=$.map(new Array(Math.min(e,c.length)),function(a,b){return[$.map(new Array(Math.min(e,d.length)),function(a,b){return 0})]});$.each(r.people,function(c,d){if(d.hasOwnProperty(a)&&d.hasOwnProperty(b)){var e=d[a],i=d[b];h[f[e].index][g[i].index]+=1}});for(var i=[],j=0;j<h.length;j++)for(var k=0;k<h[j].length;k++)i.push([e-1>k?d[k][0]:"muu laitos",e-1>j?c[j][0]:"muu arvo",h[j][k]]);var l=new google.visualization.DataTable;l.addColumn("string",b),l.addColumn("string",a),l.addColumn("number","Weight"),l.addRows(i);var m={title:"Otsikko",sankey:{node:{label:{fontSize:14,color:"#000",bold:!0},labelPadding:12}}},n=new google.visualization.Sankey(document.getElementById("chart_sankey"));n.draw(l,m)}function n(a,b){return o(a,b).sort(function(a,b){return b[1]-a[1]})}function o(a,b){var c={};return $.each(a,function(a,d){if(d.hasOwnProperty(b)){var e=d[b];c.hasOwnProperty(e)?c[e]+=1:c[e]=1}}),$.map(c,function(a,b){return[[b,a]]})}function p(a){r.isLoadingResults=!0,r.people=[],r.years=[],r.topTitles=[],r.topOrgs=[],r.error=void 0;var b=e.uniqueId();return t=b,f.getResults2(a).then(function(a){return t===b?(r.isLoadingResults=!1,r.people=a[0],a):void 0})["catch"](q)}function q(a){console.log(a),r.isLoadingResults=!1,r.error=a}var r=this;r.people=[],r.startYear=[],r.topTitles=[],r.topOrgs=[],r.removeFacetSelections=i,google.charts.load("current",{packages:["corechart","line","sankey"]});var s=a.$on("sf-initial-constraints",function(a,b){k(a,b),s()});a.$on("sf-facet-constraints",k),f.getFacets().then(function(b){r.facets=b,r.facetOptions=j(),r.facetOptions.scope=a,r.handler=new g(r.facetOptions)});var t}angular.module("facetApp").controller("VisuController",a),a.$inject=["$scope","$location","$q","$state","_","visuService","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){d.reload()}function j(){var a=f.getFacetOptions();return a.initialState=h.getFacetValuesFromUrlParams(),a}function k(a,b){return s.previousSelections&&e.isEqual(b.constraint,s.previousSelections)?void 0:(s.previousSelections=e.clone(b.constraint),h.updateUrlParams(b),q(b).then(function(a){google.charts.setOnLoadCallback(function(){l(s.ages,[1,120],"Elinikä","chart_age")}),google.charts.setOnLoadCallback(function(){l(s.marriageAges,[1,120],"Naimisiinmenoikä","chart_marriageAge")}),google.charts.setOnLoadCallback(function(){l(s.firstChildAges,[1,120],"Lapsensaanti-ikä","chart_firstChildAge")}),google.charts.setOnLoadCallback(function(){l(s.numberOfChildren,[1,25],"Lasten lukumäärä","chart_numberOfChildren")}),google.charts.setOnLoadCallback(function(){l(s.numberOfSpouses,[1,7],"Puolisoiden lukumäärä","chart_numberOfSpouses")})}))}function l(a,b,c,d){var e=$.map(o(a,b),function(a,b){return[[a[0],a[1]]]}),f=n(e),g=new google.visualization.DataTable,h={title:c+", keskiarvo: "+f[0].toFixed(2)+", keskihajonta: "+f[1].toFixed(2),legend:{position:"none"},tooltip:{format:"none"},colors:["blue"],hAxis:{slantedText:!1,maxAlternation:1,format:"",ticks:m(b)},vAxis:{maxValue:4},width:"95%",bar:{groupWidth:"88%"},height:500},i=new google.visualization.ColumnChart(document.getElementById(d));g.addColumn("number","Ikä"),g.addColumn("number","Henkilöä"),g.addRows(e),i.draw(g,h)}function m(a){for(var b=[],c=10*Math.floor(1+a[0]/10);c<a[1];)b.push(c),c+=10;return b}function n(a){var b=0,c=0,d=0;if($.each(a,function(a,e){var f=e[0]*e[1];b+=f,c+=e[0]*f,d+=e[1]}),d>0){var e=b/d;return[e,Math.sqrt(c/d-e*e)]}return[0,0]}function o(a,b){var c=[];if($.each(a,function(a,b){c.push([parseInt(b.value),parseInt(b.count)])}),c=p(c,b),c.length<2){var d=parseInt(c[0][0])-1;c=[[d,0]].concat(c),d=parseInt(c[c.length-1][0])+1,c.push([d,0])}return c}function p(a,b){if(a.length<2)return a;a.push([b[1],0]);var c=[],d=parseInt(a[0][0]);d>b[0]&&(a.unshift([b[0],0]),d=b[0]);for(var e=0;e<a.length;e++){for(var f=parseInt(a[e][0]);f>d;)c.push([d,0]),d++;c.push(a[e]),d++}return c}function q(a){s.isLoadingResults=!0,s.ages=[],s.marriageAges=[],s.firstChildAges=[],s.numberOfChildren=[],s.numberOfSpouses=[],s.error=void 0;var b=e.uniqueId();return u=b,f.getResults(a).then(function(a){return u===b?(s.isLoadingResults=!1,s.ages=a[0],s.marriageAges=a[1],s.firstChildAges=a[2],s.numberOfChildren=a[3],s.numberOfSpouses=a[4],a):void 0})["catch"](r)}function r(a){console.log(a),s.isLoadingResults=!1,s.error=a}var s=this;s.people=[],s.startYear=[],s.removeFacetSelections=i,google.charts.load("current",{packages:["corechart","line"]});var t=a.$on("sf-initial-constraints",function(a,b){k(a,b),t()});a.$on("sf-facet-constraints",k),f.getFacets().then(function(b){s.facets=b,s.facetOptions=j(),s.facetOptions.scope=a,s.handler=new g(s.facetOptions)});var u}angular.module("facetApp").controller("VisuController2",a),a.$inject=["$scope","$location","$q","$state","_","visuService","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(a){var b=a.constraint.join(" "),c=r.replace("<RESULT_SET>",b);return x.getObjectsNoGrouping(c)}function h(a){var b=a.constraint.join(" "),c=s.replace("<RESULT_SET>",b);return x.getObjectsNoGrouping(c)}function i(a){var b=a.constraint.join(" "),c=q.replace("<RESULT_SET>",b);return x.getObjectsNoGrouping(c)}function j(a){var b=a.constraint.join(" "),c=t.replace(/<RESULT_SET>/g,b);return x.getObjectsNoGrouping(c)}function k(a){var b=a.constraint.join(" "),c=u.replace("<RESULT_SET>",b);return x.getObjectsNoGrouping(c)}function l(b){var c=[this.getAge(b),this.getMarriageAge(b),this.getFirstChildAge(b),this.getNumberOfChildren(b),this.getNumberOfSpouses(b)];return a.all(c)}function m(){var b=angular.copy(o);return a.when(b)}function n(){return w}this.getAge=i,this.getMarriageAge=g,this.getFirstChildAge=h,this.getNumberOfChildren=j,this.getNumberOfSpouses=k,this.getResults=l,this.getFacets=m,this.getFacetOptions=n;var o={entryText:{facetId:"entryText",graph:"<http://ldf.fi/nbf/people>",name:"Haku",enabled:!0},link:{facetId:"link",choices:[{id:"wikipedia",pattern:"?id <http://ldf.fi/nbf/wikipedia> [] .",label:"Wikipedia"},{id:"wikidata",pattern:"?id <http://ldf.fi/nbf/wikidata> [] .",label:"Wikidata"},{id:"sotasampo",pattern:"?id <http://ldf.fi/nbf/warsampo> [] .",label:"Sotasampo"},{id:"norssit",pattern:"?id <http://ldf.fi/nbf/norssi> [] .",label:"Norssit"},{id:"kirjasampo",pattern:"?id <http://ldf.fi/nbf/kirjasampo> [] . ",label:"Kirjasampo"},{id:"blf",pattern:"?id <http://ldf.fi/nbf/blf> [] .",label:"BLF"},{id:"ulan",pattern:"?id <http://ldf.fi/nbf/ulan> [] .",label:"ULAN"},{id:"viaf",pattern:"?id <http://ldf.fi/nbf/viaf> [] .",label:"VIAF"},{id:"genicom",pattern:"?id <http://ldf.fi/nbf/genicom> [] .",label:"Geni.com"},{id:"website",pattern:"?id <http://ldf.fi/nbf/website> [] .",label:"Kotisivu"},{id:"eduskunta",pattern:"?id <http://ldf.fi/nbf/eduskunta> [] .",label:"Eduskunta"}],enabled:!0,name:"Linkit"},period:{facetId:"period",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_period>/<http://www.w3.org/2004/02/skos/core#prefLabel>",name:"Ajanjakso",enabled:!0},familyName:{facetId:"familyName",predicate:"<http://www.w3.org/2008/05/skos-xl#prefLabel>/<http://schema.org/familyName>",name:"Sukunimi"},dataset:{facetId:"dataset",predicate:"<http://purl.org/dc/terms/source>",name:"Tietokanta"},birthYear:{facetId:"birthYear",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://www.cidoc-crm.org/cidoc-crm/P98_brought_into_life>/<http://ldf.fi/nbf/time>",name:"Synnyinaika",enabled:!0},place:{facetId:"place",predicate:"<http://xmlns.com/foaf/0.1/focus>/(^<http://www.cidoc-crm.org/cidoc-crm/P98_brought_into_life>|^<http://www.cidoc-crm.org/cidoc-crm/P100_was_death_of>)/<http://ldf.fi/nbf/place>/<http://www.w3.org/2004/02/skos/core#prefLabel>",name:"Paikkakunta",enabled:!0},deathYear:{facetId:"birthYear",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://www.cidoc-crm.org/cidoc-crm/P100_was_death_of>/<http://ldf.fi/nbf/time>",name:"Kuolinaika",enabled:!0},title:{facetId:"title",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://ldf.fi/schema/bioc/inheres_in>/<http://ldf.fi/nbf/has_title>",name:"Arvo tai ammatti",hierarchy:"<http://www.w3.org/2004/02/skos/core#broader>",depth:3,enabled:!0},company:{facetId:"company",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://ldf.fi/schema/bioc/inheres_in>/<http://ldf.fi/nbf/related_company>",name:"Yritys tai yhteisö",enabled:!0},category:{facetId:"category",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_category>",name:"Kategoria",enabled:!0},gender:{facetId:"gender",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/sukupuoli>",name:"Sukupuoli",enabled:!0}},p="PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> PREFIX bioc:  <http://ldf.fi/schema/bioc/>  PREFIX rdfs:  <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX skos:  <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX	nbf:	<http://ldf.fi/nbf/>  PREFIX	categories:	<http://ldf.fi/nbf/categories/>  PREFIX	gvp:	<http://vocab.getty.edu/ontology#>	 PREFIX crm:   <http://www.cidoc-crm.org/cidoc-crm/>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX dcterms: <http://purl.org/dc/terms/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX gvp: <http://vocab.getty.edu/ontology#> PREFIX	relations:	<http://ldf.fi/nbf/relations/> PREFIX	sources:	<http://ldf.fi/nbf/sources/> ",q=p+"SELECT ?value (count(?value) AS ?count) WHERE {  { <RESULT_SET> }    ?id foaf:focus/^crm:P100_was_death_of/nbf:time [ gvp:estStart ?time ; gvp:estEnd ?time2 ] ;   	foaf:focus/^crm:P98_brought_into_life/nbf:time [ gvp:estStart ?birth ; gvp:estEnd ?birth2 ]   BIND (xsd:integer(0.5*(year(?time)+year(?time2)-year(?birth)-year(?birth2))) AS ?value)   FILTER (-1<?value && ?value<120) } GROUP BY ?value  ORDER BY ?value ",r=p+"SELECT ?value (count(?value) AS ?count) WHERE {   {     SELECT distinct ?id (min(?age) AS ?value) WHERE {     { <RESULT_SET> }     VALUES ?rel { relations:Spouse }     ?id bioc:has_family_relation [ a ?rel ;  nbf:time/gvp:estStart ?time ] ; 	         foaf:focus/^crm:P98_brought_into_life/nbf:time/gvp:estStart ?birth .     BIND (year(?time)-year(?birth) AS ?age)     FILTER (13<?age && ?age<120)     } GROUP BY ?id  } } GROUP BY ?value ORDER BY ?value ",s=p+"SELECT ?value (count(?value) AS ?count) WHERE {   {     SELECT distinct ?id (min(?age) AS ?value) WHERE {     { <RESULT_SET> }     VALUES ?rel { relations:Child relations:Son relations:Daughter }     ?id bioc:has_family_relation [ a ?rel ;  nbf:time/gvp:estStart ?time ] ; 	         foaf:focus/^crm:P98_brought_into_life/nbf:time/gvp:estStart ?birth .     BIND (year(?time)-year(?birth) AS ?age)     FILTER (13<?age && ?age<120)     } GROUP BY ?id  } } GROUP BY ?value ORDER BY ?value ",t=p+' SELECT ?value (count(?id) AS ?count) WHERE {   {   SELECT ?id (count(?rel) AS ?value)   WHERE {     { <RESULT_SET> }     VALUES ?rel { relations:Child relations:Son relations:Daughter }      ?id bioc:has_family_relation/a ?rel .     } GROUP BY ?id }   UNION   {     { <RESULT_SET> }   ?id dcterms:source sources:source1 ;     foaf:focus/nbf:has_biography/nbf:has_paragraph/nbf:id "2"^^xsd:integer .   FILTER not exists { ?id bioc:has_family_relation [ a relations:Child ]}   BIND (0 AS ?value)   } } GROUP BY ?value ORDER BY ?value ',u=p+"SELECT ?value (count(?id) AS ?count) WHERE {   SELECT ?id (count(?rel) AS ?value) WHERE {     { <RESULT_SET> }     VALUES ?rel { relations:Spouse }     ?id bioc:has_family_relation/a ?rel .   } GROUP BY ?id } GROUP BY ?value ORDER BY ?value ",v=f,w={endpointUrl:v,rdfClass:"<http://ldf.fi/nbf/PersonConcept>",preferredLang:"fi"},x=new d(v,e)}angular.module("facetApp").service("visuService",a),a.$inject=["$q","$location","_","AdvancedSparqlService","objectMapperService","SPARQL_ENDPOINT_URL"]}(),angular.module("facetApp").run(["$templateCache",function(a){"use strict";a.put("views/cards.html",'<div class="container"> <div class="row"> <div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2"> <!-- <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive" /> --> </div><!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n--><div class="col-xs-9 col-md-9 col-lg-9 vcenter push-xs-9 toptext"> <div ng-include="\'views/description.partial.html\'"></div> </div> <!--  <div class="col-md-12 pull-md-12 col-lg-12">\n      <br/>BIRTH YEAR\n          <rzslider rz-slider-model="minRangeSlider.minValue" rz-slider-high="minRangeSlider.maxValue" rz-slider-options="minRangeSlider.options">\n        </rzslider>\n    </div> --> <div class="col-md-12 pull-md-12 col-lg-12"> <!--\n    <div class="col-md-4 pull-md-4 col-lg-3"> --> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-12 pull-md-12 col-lg-12"> <div class="sort-custom"> <b class="subject">Sort by</b> <span class="sort"> <a href="" ng-click="vm.sortBy(\'?birthDate\')">Birthdate</a> <span ng-class="vm.getSortClass(\'?birthDate\', true)" class="glyphicon" aria-hidden="true"></span>&emsp;&emsp;&emsp; <a href="" ng-click="vm.sortBy(\'?familyName\')">Family Name</a> <span ng-class="vm.getSortClass(\'?familyName\')" class="glyphicon" aria-hidden="true"></span>&emsp;&emsp;&emsp; <a href="" ng-click="vm.sortBy(\'?givenName\')">First Name</a> <span ng-class="vm.getSortClass(\'?givenName\')" class="glyphicon" aria-hidden="true"></span> </span> </div> <div ng-include="\'views/cards.partial.html\'"></div> </div> </div> </div>'),a.put("views/cards.partial.html",'<img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div infinite-scroll="vm.nextPage()" infinite-scroll-disabled="vm.isScrollDisabled()" infinite-scroll-distance="0"> <div class="row"> <div ng-repeat="person in vm.people" class="person-container"> <div class="col-xs-12 col-sm-12 person-panel col-md-3 col-lg-2"> <div class="thumbnail"> <a ui-sref="person.detail({ personId: person.id })"> <div class="person-profile-img vertical-center"> <img class="img img-responsive center-block media-middle" ng-src="{{ ::person.images | first }}"> </div> </a> <div class="caption"> <div class="visible-caption"> <div class="row"> <div class="col-xs-12 col-sm-3 col-md-12"> <b><a ui-sref="person.detail({ personId: person.id })">{{ ::person.givenName }} {{ ::person.familyName }}</a></b> </div> <div class="col-xs-12 col-sm-9 col-md-12"> <p ng-if="::(person.birthPlace || person.birthDate || person.deathDate)"> <span class="birth icon-born"></span>&nbsp;<span ng-if="::person.birthPlace">{{ ::person.birthPlace }}</span>{{ ::person.birthDate }} <span ng-if="::person.deathDate"><span class="birth icon-death"></span>&nbsp;{{ ::person.deathPlace }}&nbsp;{{ ::person.deathDate }}</span> </p> </div> <div ng-if="::person.occupation" class="col-xs-12"> <p>{{ ::person.occupation | castArray | join:\', \' }}</p> </div> <!-- Glyphicon Section--> <div class="col-xs-12 icon-menu"> <a title="Näytä matrikkeliteksti" ng-attr-title="{{ showText ? \'Piilota matrikkeliteksti\' : \'Näytä matrikkeliteksti\' }}" href="" ng-click="showText = !showText"><span class="bio" ng-class="{ \'icon-bio-down\': !showText, \'icon-bio-up\': showText }" aria-hidden="true"></span></a> <a title="Data" class="" ng-href="{{ ::person.id }}"><span class="bio icon-data" aria-hidden="true"></span></a> </div> </div> <!----> <div class="row"> <div ng-if="::person.hasAchievements" class="col-xs-6"> <a href="" class="link" ng-click="vm.getAchievements(person)" uib-popover-template="\'views/achievements-popover.html\'" popover-trigger="\'outsideClick\'" popover-append-to-body="true" popover-placement="auto right">Saavutukset</a> </div> <div ng-if="::person.wikipedia" class="col-xs-6"> <a ng-href="{{ ::person.wikipedia }}">Wikipedia</a> </div> <div ng-if="::person.wikidata" class="col-xs-6"> <a ng-href="{{ ::person.wikidata }}">Wikidata</a> </div> <div ng-if="::person.dbpedia" class="col-xs-6"> <a ng-href="{{ ::person.dbpedia }}">DBpedia</a> </div> <div ng-if="::person.twitter" class="col-xs-6"> <a ng-href="{{ ::person.twitter }}">Twitter</a> </div> <div ng-if="::person.norssi" class="col-xs-6"> <a ng-href="http://www.norssit.fi/semweb/#!/tiedot/http:~2F~2Fldf.fi~2Fnorssit~2F{{ ::person.norssi }}">Norssi</a> </div> <div ng-if="::person.kirjasampo" class="col-xs-6"> <a ng-href="{{ ::person.kirjasampo }}">Kirjasampo</a> </div> <div ng-if="::person.blf" class="col-xs-6"> <a ng-href="{{ ::person.blf }}">BLF</a> </div> <div ng-if="::person.ulan" class="col-xs-6"> <a ng-href="{{ ::person.ulan }}">ULAN</a> </div> <div ng-if="::person.viaf" class="col-xs-6"> <a ng-href="{{ ::person.viaf }}">VIAF</a> </div> <div ng-if="::person.norssit" class="col-xs-6"> <a ng-href="{{ ::person.norssit }}">Norssit</a> </div> <div ng-if="::person.eduskunta" class="col-xs-6"> <a ng-href="{{ ::person.eduskunta }}">Eduskunta</a> </div> <div ng-if="::person.website" class="col-xs-6"> <a ng-href="{{ ::person.website }}">Kotisivu</a> </div> <div ng-if="::person.genicom" class="col-xs-6"> <a ng-href="{{ ::person.genicom }}">Kotisivu (Geni.com)</a> </div> <div ng-if="::person.genitree" class="col-xs-6"> <a ng-href="{{ ::person.genitree }}">Sukupuu (Geni.com)</a> </div> </div> <div ng-if="::person.relative" class="row"> <div class="col-xs-12">Sukulaiset:</div> <div class="col-sm-6 col-md-12" ng-repeat="relative in person.relative | castArray"> {{ ::relative.type }} <a ui-sref="person.detail({ personId: relative.id })">{{ ::relative.name }}</a> </div> </div> <div ng-if="::person.hobby" class="row"> <div class="col-md-12"> <p>Harrastukset: {{ ::person.hobby | castArray | join: \', \' }}</p> </div> </div> <div uib-collapse="!showText"> <hr> <p>{{ ::person.short_description }}</p> </div> </div> </div> </div> </div> <div class="clearfix visible-lg-block" ng-if="($index + 1) % 6 == 0"></div> <div class="clearfix visible-md-block" ng-if="($index + 1) % 4 == 0"></div> <div class="clearfix visible-sm-block" ng-if="($index + 1) % 1 == 0"></div> <div class="clearfix visible-xs-block" ng-if="($index + 1) % 1 == 0"></div> </div> </div> </div>'),a.put("views/description.partial.html",'<h4>U.S. Congress Legislators</h4> <p> Biographical Repository of the U.S. Congress Legislators. This interface enables you to explore biographical and prosopographical data of the United States Congress members from the 1st through 115th Congresses (1789-2018).<br>Source: <a href="https://github.com/unitedstates/congress-legislators">Members of the United States Congress</a>, <a href="http://k7moa.com/">K7MOA Legacy Voteview Website</a> </p>'),a.put("views/description.statistics.partial.html","<h1>This page is under construction</h1> <p> This page is under construction. </p>"),a.put("views/detail.html",'<div class="col-sm-12 col-md-8 text-center" ng-show="vm.person"> <div class="col-sm-12" ng-show="!vm.person && !vm.error"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif"> </div> <h1>{{ vm.person.givenName }} {{ vm.person.familyName }}</h1> <div class="thumbnail"> <div class="person-profile-img"> <div class="row"> <div class="col-sm-12 text-center"> <img ng-repeat="img in vm.person.images" class="person-img img img-responsive" ng-src="{{ img }}"> </div> </div> </div> <div class="caption"> <div class="visible-caption"> <div class="row"> <div class="col-xs-12"> <p ng-if="(vm.person.birthPlace || vm.person.birthDate || vm.person.deathDate)"> <span ng-if="(vm.person.birthPlace || vm.person.birthDate)"><span class="birth icon-born"></span>&nbsp;{{ vm.person.birthPlace }} {{ vm.person.birthDate }}</span> <br> <span ng-if="(vm.person.deathPlace || vm.person.deathDate)"><span class="birth icon-death"></span>&nbsp;{{ vm.person.deathPlace }}</span> <span ng-if="vm.person.deathDate">{{ vm.person.deathDate }}</span> </p> </div> <div ng-if="vm.person.occupation" class="col-xs-12"> <p>{{ vm.person.occupation | castArray | join:\', \' }}</p> </div> <div class="col-xs-12 icon-menu"> <a title="Data" class="" ng-href="{{ vm.person.id }}"><span class="bio icon-data" aria-hidden="true"></span></a> </div> </div> <div class="row"> <div ng-if="vm.person.wikipedia" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.wikipedia }}">Wikipedia</a> </div><div ng-if="vm.person.wikidata" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.wikidata }}">Wikidata</a> </div> <div ng-if="vm.person.dbpedia" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.dbpedia }}">DBpedia</a> </div> <div ng-if="vm.person.twitter" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.twitter }}">Twitter</a> </div> </div> </div> <div ng-if="vm.person.committee" class="row padded-row"> <div class="col-xs-12"><h4>Member of committees:</h4></div> <p style="white-space: pre-line">{{ vm.person.committee.label }}</p> </div> <div ng-if="vm.person.description" class="entry-text text-left"> <hr> <p>{{ vm.person.description }}</p> </div> </div> </div> </div> <div class="col-md-4 text-left" ng-if="vm.person.similar"> <h3>Similar persons</h3> <img ng-if="!vm.person.similar" class="loading-img" src="images/loading-lg.7ba320e0.gif"> <div class="col-sm-6" ng-repeat="person in vm.person.similar"> <a ui-sref="person.detail({ personId: person.prs })">{{ person.label }}</a> </div> </div>  '),a.put("views/facets.partial.html",'<a id="remove" href="" ng-click="vm.removeFacetSelections()">Remove all selections</a> <div class="facets"> <div class="row"> <div class="col-md-12 pull-md-12 col-lg-12"> <div id="sl"> <seco-slider-facet data-options="vm.facets.slider"></seco-slider-facet> </div> </div> </div> </div> <!-- Following facets divided in 2 rows (4 × 4)to avoid layout misaligning --> <div class="facets"> <div class="row"> <div class="col-md-3 pull-md-3 col-lg-3"> <seco-jena-text-facet data-options="vm.facets.entryText"></seco-jena-text-facet> <div class="show-facets row"> <div class="col-xs-12"> <button class="btn btn-default pull-right visible-xs-block visible-sm-block" ng-click="show = !show">{{ show ? \'Hide all facets\' : \'Show all facets\' }}</button> </div> </div> </div> <div class="hideable-facets" ng-class="{ \'hidden-sm hidden-xs\': !show }"> <!--  <seco-basic-facet data-options="vm.facets.occupation"></seco-basic-facet> --> <div class="col-md-3 pull-md-3 col-lg-3"> <seco-basic-facet data-options="vm.facets.familyName"></seco-basic-facet> </div> <div class="col-md-3 pull-md-3 col-lg-3"> <seco-basic-facet data-options="vm.facets.givenName"></seco-basic-facet> </div> <div class="col-md-3 pull-md-3 col-lg-3"> <seco-basic-facet data-options="vm.facets.gender"></seco-basic-facet> </div> </div> </div> </div> <div class="facets"> <div class="row"> <div class="hideable-facets" ng-class="{ \'hidden-sm hidden-xs\': !show }"> <div class="col-md-3 pull-md-3 col-lg-3"> <seco-basic-facet data-options="vm.facets.type"></seco-basic-facet> </div> <div class="col-md-3 pull-md-3 col-lg-3"> <seco-basic-facet data-options="vm.facets.memberOf"></seco-basic-facet> </div> <div class="col-md-3 pull-md-3 col-lg-3"> <seco-basic-facet data-options="vm.facets.state"></seco-basic-facet> </div> <div class="col-md-3 pull-md-3 col-lg-3"> <seco-checkbox-facet data-options="vm.facets.link"></seco-checkbox-facet> </div> </div> </div> </div> <div class="facets"> <div class="row"> <div class="hideable-facets" ng-class="{ \'hidden-sm hidden-xs\': !show }"> <div class="col-md-3 pull-md-3 col-lg-3"> <seco-basic-facet data-options="vm.facets.occupation"></seco-basic-facet> </div> <div class="col-md-3 pull-md-3 col-lg-3"> <seco-hierarchy-facet data-options="vm.facets.birthPlace"></seco-hierarchy-facet> </div> <div class="col-md-3 pull-md-3 col-lg-3"> <seco-basic-facet data-options="vm.facets.congress_number"></seco-basic-facet> </div> </div> </div> </div>'),a.put("views/groupmap.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12" ng-show="!vm.markers && !vm.error"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif"> </div> <div uib-alert ng-if="vm.error"> {{ vm.error }} </div> <div class="text-center"> On the map people\'s <b><span style="color:#0045b5">BIRTH</span></b> and <b><span style="color:#f3224e">DEATH</span></b> places are shown. The illustration is made based on the selections made in facets on the left. <div class="container-fluid thumbnail"> <div class="col-md-4 pull-md-4 col-lg-3"> <div id="sl-2"> <seco-slider-facet data-options="vm.facets.slider"></seco-slider-facet> </div> <div ng-include="\'views/mapfacets.partial.html\'"></div> </div> <div class="col-md-8 col-lg-9"> <ui-gmap-google-map id="ui-gmap-google-map" center="vm.map.center" zoom="vm.map.zoom"> <ui-gmap-window id="ui-gmap-window" show="vm.window.show" options="vm.window" templateurl="\'views/groupmap.popup.html\'" templateparameter="vm" closeclick="vm.closeWindow"> <span></span> </ui-gmap-window> <ui-gmap-marker ng-repeat="marker in vm.markers" coords="marker" idkey="marker.id" options="marker.options" click="marker.onClick()"></ui-gmap-marker> </ui-gmap-google-map> </div> </div> </div> </div> </div>'),a.put("views/groupmap.popup.html",'<div class="map-popup"> <div id="popupcontainer" class="col-sm-4 col-md-2 text-center"> <h4 ng-show="parameter.place_label">{{ parameter.place_label }}</h4> <ul class="list-group row list-group-persons ng-scope" id="popupcontainer2"> <li class="list-group-item col-xs-6 ng-scope" ng-show="parameter.people" ng-repeat="person in parameter.people"> <a ui-sref="person.detail({ personId: person.uri })">{{ person.label }}</a> </li> </ul> </div> </div>'),a.put("views/help.html",'<div class="modal-header"> <div class="row"> <div class="col-xs-10 text-left"> <h3 class="modal-title">U.S. Congress Legislators</h3> </div> <div class="col-xs-2"> <a href="#" ng-click="$close()" class="no-decoration btn-lg pull-right glyphicon glyphicon-remove"></a> </div> </div> </div> <div class="modal-body"> <p> You can browse the congress legislators data (members list) by using the timline and the filters. The timeline enables you to filter data by the number fo congresses—starting from the 1st (1789) through 115th (2018). Each filter has its own search box as well as a list of options for the filter. To search the register for text search, enter the text in the \'Search\' field. To add/remove the filters, press the \'+\'/\'-\' button on the right of each filter. Only one option can be selected for each filter, and the member list is filtered based on the choices (The selection can be deleted by selecting \'- No selection -\'). Furtheremore, this interface allows multiple selection. You can explore the data by selecting and combining different filters. </p> <hr> <p> <h4>Filter Selection:</h4> <ol> <li>Drag the timeline and select a range.</li> <li>Select one of the filters (open the filter by pressing the \'+\' button if needed).</li> <li>Select a value from the list in the filter, or type in the list in the text box above.<br>If you use text box, the list of filters below will be updated as you type.</li> <li>You can select a filter condition by clicking on the list<br>or delete by clicking on \'—\' button or \'- No selection -\' which can be found in the top of the list.</li> <li>The list will be updated.</li> <li>You can go over the previous steps 1-4, try different filters and combine them.</li> </ol> </p> </div>'),a.put("views/login.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12"> <h1>Kirjaudu</h1> <div ng-show="vm.error" class="alert alert-danger" role="alert">{{ vm.error }}</div> <form> <div class="form-group"> <label for="un">Käyttäjätunnus</label> <input ng-model="vm.un" type="text" class="form-control" id="un" placeholder="Username"> </div> <div class="form-group"> <label for="pw">Salasana</label> <input ng-model="vm.pw" type="password" class="form-control" id="pw" placeholder="Password"> </div> <button ng-click="vm.login()" type="submit" class="btn btn-default">Submit</button> </form> </div> </div> </div>'),a.put("views/map.html",'<div class="container"> <div class="row"> <div class="col-sm-12" ng-show="!vm.person && !vm.error"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif"> </div> <div uib-alert ng-if="vm.error"> {{ vm.error }} </div> <div class="container-fluid text-center" ng-show="vm.person"> <h1>{{ vm.person.givenName }} {{ vm.person.familyName }}</h1> <div class="container-fluid thumbnail"> <div> <div id="labelcontainer" class="col-sm-4 col-md-2 text-center" ng-show="vm.person"> <p ng-repeat="event in ::vm.events" class="{{event.class}}" ng-mouseenter="vm.focusEvent(event)" ng-mouseleave="vm.unfocusEvent(event)"> <a ng-if="::event.relativelink" ng-href="{{event.relativelink}}">{{ event.id }}: {{ event.label }}</a> <span ng-if="::!event.relativelink">{{ event.id }}: {{ event.label }}</span> </p> </div> </div> <div class="col-sm-12 col-md-10 text-center"> <ui-gmap-google-map id="ui-gmap-google-map" center="vm.map.center" zoom="vm.map.zoom"> <ui-gmap-marker ng-repeat="marker in vm.markers" coords="marker" idkey="marker.id" options="marker.options"></ui-gmap-marker> </ui-gmap-google-map> <svg id="timelinecontainer" viewbox="-15,-7,120,27" preserveaspectratio="none" version="1.0" x="0" y="0" width="900" height="180" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <line ng-repeat="line in ::vm.mainline.lines" ng-attr-x1="{{ line.x1 }}" ng-attr-x2="{{ line.x2 }}" ng-attr-y1="{{ line.y1 }}" ng-attr-y2="{{ line.y2 }}"> </line> <text ng-repeat="text in ::vm.mainline.texts" ng-attr-x="{{ text.x }}" ng-attr-y="{{ text.y }}"> {{ text.year }} </text> <path ng-repeat="event in vm.events" ng-mouseenter="vm.focusEvent(event)" ng-mouseleave="vm.unfocusEvent(event)" class="{{ event.class }}" ng-attr-d="{{ event.path }}"> </path> </svg> <p> <span>{{ vm.currentEvent }}</span> </p> </div> </div> </div> </div> </div>'),a.put("views/mapfacets.partial.html",'<a href="" ng-click="vm.removeFacetSelections()">Remove all selections</a> <div class="facets"> <seco-jena-text-facet data-options="vm.facets.entryText"></seco-jena-text-facet> <div class="show-facets row"> <div class="col-xs-12"> <button class="btn btn-default pull-right visible-xs-block visible-sm-block" ng-click="show = !show">{{ show ? \'Hide the facets\' : \'Show the facets\' }}</button> </div> </div> <div class="hideable-facets" ng-class="{ \'hidden-sm hidden-xs\': !show }"> <seco-basic-facet data-options="vm.facets.familyName"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.givenName"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.gender"></seco-basic-facet> <seco-hierarchy-facet data-options="vm.facets.birthPlace"></seco-hierarchy-facet> <seco-basic-facet data-options="vm.facets.type"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.memberOf"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.state"></seco-basic-facet> <seco-checkbox-facet data-options="vm.facets.link"></seco-checkbox-facet> <seco-basic-facet data-options="vm.facets.occupation"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.congress_number"></seco-basic-facet> </div> </div>'),
a.put("views/page-modal.html",'<div class="modal-header"> <div class="row"> <div class="col-xs-8"> <h3 class="modal-title">{{ $ctrl.person.ordinal }} {{ $ctrl.person.givenName }} {{ $ctrl.person.familyName }}</h3> </div> <div class="col-xs-4 text-right"> <button class="btn btn-default" ng-click="$ctrl.previousPage()" ng-disabled="$ctrl.pageNo === 1" aria-label="Edellinen sivu"> <span class="glyphicon glyphicon-step-backward"></span> </button> <span>{{ $ctrl.pageNo }}</span> <button class="btn btn-default" ng-click="$ctrl.nextPage()" ng-disabled="$ctrl.pageNo === 716" aria-label="Seuraava sivu"> <span class="glyphicon glyphicon-step-forward"></span> </button> <button ng-click="$ctrl.close()" class="btn btn-default" aria-label="Sulje"> <span aria-hidden="true" class="glyphicon glyphicon-remove"></span> </button> </div> </div> </div><div class="modal-body"> <img class="img img-responsive" ng-src="{{ $ctrl.pageUrl }}"> </div>'),a.put("views/person.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12"> <ul class="nav nav-tabs"> <li ui-sref="person.detail" ui-sref-active="active"> <a href=""><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Personal Information</a> </li> <li ui-sref="person.map" ui-sref-active="active"> <a href=""><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> Timeline</a> </li> </ul> </div> </div> <div class="row"> <div ui-view></div> </div> </div>'),a.put("views/profile-image-popover.html",'<div> <img class="img img-responsive" ng-src="{{ img }}"> </div>'),a.put("views/sliderFacet.directive.html",'<div ng-if="vm.facet"> <span>{{ vm.facet.name }}</span> <rzslider rz-slider-model="vm.facet.slider.minValue" rz-slider-high="vm.facet.slider.maxValue" rz-slider-options="vm.facet.slider.options"></rzslider> </div>'),a.put("views/subnavbar.html",'<ul class="nav navbar-nav"> <li><a href="" id="show-help" ng-click="vm.showHelp()"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> Help</a></li> <li ui-sref-active="active"><a ui-sref="cards"><span class="glyphicon glyphicon-th" aria-hidden="true"></span> Grid</a></li> <li ui-sref-active="active"><a ui-sref="table"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span> List</a></li> <li ui-sref-active="active"><a ui-sref="groupmap"><span class="glyphicon glyphicon glyphicon-globe" aria-hidden="true"></span> Map</a></li> <li class="dropdown" ui-sref-active="{\'active\': \'visualizations.**\'}"> <a class="dropdown-toggle" data-toggle="dropdown" href="" id="statistics"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Statistics<span class="caret"></span></a> <ul class="dropdown-menu"> <li ui-sref-active="active"><a ui-sref="visualizations.visu2"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Statistics</a></li> </ul> </li> </ul>'),a.put("views/table.html",'<div class="container"> <div class="row"> <div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2"> <!-- <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive" /> --> </div><!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --><div class="col-xs-9 col-md-9 col-lg-9 vcenter push-xs-9 toptext"> <div ng-include="\'views/description.partial.html\'"></div> </div> <!--  <div class="col-md-12 pull-md-12 col-lg-12">\n      <br/>BIRTH YEAR\n          <rzslider rz-slider-model="minRangeSlider.minValue" rz-slider-high="minRangeSlider.maxValue" rz-slider-options="minRangeSlider.options">\n        </rzslider>\n    </div> --> <div class="col-md-12 pull-md-12 col-lg-12"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-12 pull-md-12 col-lg-12"> <div class="sort-custom"> <b class="subject">Sort by</b> <span class="sort"> <a href="" ng-click="vm.sortBy(\'?birthDate\')">Birthdate</a> <span ng-class="vm.getSortClass(\'?birthDate\', true)" class="glyphicon" aria-hidden="true"></span>&emsp;&emsp;&emsp; <a href="" ng-click="vm.sortBy(\'?familyName\')">Family Name</a> <span ng-class="vm.getSortClass(\'?familyName\')" class="glyphicon" aria-hidden="true"></span>&emsp;&emsp;&emsp; <a href="" ng-click="vm.sortBy(\'?givenName\')">First Name</a> <span ng-class="vm.getSortClass(\'?givenName\')" class="glyphicon" aria-hidden="true"></span> </span> </div> <div ng-include="\'views/table.partial.html\'"></div> </div> </div> </div>'),a.put("views/table.partial.html",'<table class="table table-striped norssi-table ng-table-responsive" ng-table="vm.tableParams"> <thead> <tr> <th class="col-xs-4">Name</th> <th class="col-xs-1">Occupation</th> <th class="col-xs-1">Links</th> <th class="col-xs-1"><span class="hidden-xs hidden-sm">Else</span></th> <th class="col-xs-5 hidden-xs hidden-sm">Description</th> </tr> </thead> <tbody> <tr ng-show="!vm.isLoadingResults" ng-repeat="person in $data"> <td class="person-image-container" data-title="\'Nimi\'"> <div ng-class="::{ \'name-col col-md-6 col-lg-6\': person.images }"> <b><a ui-sref="person.detail({ personId: person.id })">{{ ::person.givenName }} {{ ::person.familyName }}</a></b><br> <span ng-if="::(person.birthDate)"><span class="birth icon-born"></span>&nbsp;{{ ::person.birthPlace }} {{ ::person.birthDate }}</span> <span ng-if="::person.deathDate"><span class="birth icon-death"></span>&nbsp;{{ ::person.deathPlace }} {{ ::person.deathDate }}</span> </div> <div ng-if="::person.hasImage" class="name-col col-md-4 col-lg-4"> <div ng-repeat="img in ::person.images" ng-class="{ \'col-md-12\': ($first && $last), \'col-sm-6\': !($first && $last) }" class="person-img-col vcenter"> <img uib-popover-template="\'views/profile-image-popover.html\'" popover-trigger="\'mouseenter\'" popover-placement="auto right" popover-append-to-body="true" class="person-image img img-responsive" ng-src="{{ img  }}"> </div> </div> </td> <td class="links" data-title="\'Henkilö\'"> <div ng-if="::person.occupation" class="hidden-xs hidden-sm"> <p>{{ ::person.occupation | castArray | join:\', \' }}</p> </div> </td> <td class="links" data-title="\'Linkit\'"> <a class="link" ng-if="::person.wikipedia" ng-href="{{ ::person.wikipedia }}">Wikipedia</a> <a class="link" ng-if="::person.dbpedia" ng-href="{{ ::person.dbpedia }}">DBpedia</a> <a class="link" ng-if="::person.twitter" ng-href="{{ ::person.twitter }}">Twitter</a> <span class="icon-menu"> <a title="Data" class="" ng-href="{{ ::person.id }}"><span class="bio icon-data" aria-hidden="true"></span></a> </span> </td><td data-title="\'Else\'"> <div ng-if="::person.relativ"> <span>Relatives: </span><br> <span ng-repeat="relative in person.relative | castArray"> {{ ::relative.type }} <a ui-sref="person.detail({ personId: relative.id })">{{ ::relative.name }}</a> </span> </div> </td> <td data-title="\'Description\'" class="hidden-xs hidden-sm"> <span ng-if="::person.short_description">{{ ::person.short_description }}</span> </td> </tr> </tbody> </table> <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults">'),a.put("views/visu.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2"> <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive"> </div><!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --><div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/description.statistics.partial.html\'"></div> </div> <div class="col-md-3 pull-md-3 col-lg-2"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-9 col-lg-10" min-height="500"> Työn alla - under construction <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div id="chart_education" style="width: 100%; height: 500px"></div> <div id="chart_eduorganization" style="width: 100%; height: 500px"></div> <div id="chart_occupation" style="width: 100%; height: 500px"></div> <div id="chart_organization" style="width: 100%; height: 500px"></div> <p style="font-family: Arial; font-size:15px; color:black"><strong>Oppilaitoksista saatuja oppiarvoja</strong></p> <div id="chart_sankey" style="width: 100%; height: 700px"></div> </div> </div> </div>'),a.put("views/visu2.html",'<div class="container-fluid"> <div class="row"> <!--<div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2">\n      <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive" />\n    </div><!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --><div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/description.statistics.partial.html\'"></div> </div> <div class="col-md-3 pull-md-3 col-lg-2"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-9 col-lg-10" min-height="500"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div id="chart_age"></div> <div id="chart_marriageAge"></div> <div id="chart_firstChildAge"></div> <div id="chart_numberOfChildren"></div> <div id="chart_numberOfSpouses"></div> <!--\n         <div id="chart_matriculationYear"></div>\n         <div id="chart_topschools" style="width: 100%; height: 500px;"></div>\n         <div id="chart_toporganization" style="width: 100%; height: 500px;"></div>\n         <div id="chart_topeducation" style="width: 100%; height: 500px;"></div>\n          --> </div> </div> </div>')}]);
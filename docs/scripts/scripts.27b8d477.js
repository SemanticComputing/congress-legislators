!function(){"use strict";angular.module("facetApp",["ui.router","seco.facetedSearch","ngTable","angular.filter","ngAnimate","ui.bootstrap","infinite-scroll","uiGmapgoogle-maps"]).constant("_",_).constant("RESULTS_PER_PAGE",25).constant("PAGES_PER_QUERY",1).value("SPARQL_ENDPOINT_URL","https://ldf.fi/congress/sparql").run(["authStorage",function(a){a.init()}]).config(["$urlMatcherFactoryProvider",function(a){a.strictMode(!1)}]).config(["$urlRouterProvider",function(a){a.when("","/grid")}]).service("authInterceptor",["$q","$state",function(a,b){this.responseError=function(c){return 401==c.status&&b.go("login"),a.reject(c)}}]).config(["$httpProvider",function(a){a.interceptors.push("authInterceptor")}]).config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginController",controllerAs:"vm"}).state("person",{"abstract":!0,url:"/:personId",templateUrl:"views/person.html"}).state("person.detail",{url:"",templateUrl:"views/detail.html",controller:"DetailController",controllerAs:"vm"}).state("person.map",{url:"/kartta",templateUrl:"views/map.html",controller:"MapController",controllerAs:"vm"}).state("table",{url:"/list",templateUrl:"views/table.html",controller:"TableController",controllerAs:"vm"}).state("groupmap",{url:"/joukkokartta",templateUrl:"views/groupmap.html",controller:"GroupmapController",controllerAs:"vm"}).state("cards",{url:"/grid",templateUrl:"views/cards.html",controller:"CardsController",controllerAs:"vm"}).state("visualizations",{"abstract":!0}).state("visualizations.visu",{url:"/visualisointi",templateUrl:"views/visu.html",controller:"VisuController",controllerAs:"vm"}).state("visualizations.visu2",{url:"/visualisointi2",templateUrl:"views/visu2.html",controller:"VisuController2",controllerAs:"vm"})}])}(),function(){"use strict";angular.module("facetApp").service("authStorage",["$window","$http",function(a,b){function c(){var a=f();a&&e(a)}function d(){a.sessionStorage.removeItem("sparqlAuthToken")}function e(c){return b.defaults.headers.common.Authorization="Basic "+c,a.sessionStorage.setItem("sparqlAuthToken",c)}function f(){return a.sessionStorage.getItem("sparqlAuthToken")}this.init=c,this.setToken=e,this.getToken=f,this.clearToken=d}])}(),function(){"use strict";function a(a,b,c,d){function e(a,e){c.clearToken();var f=btoa(a+":"+e),g={headers:{Authorization:"Basic "+f}};return b.get(d+"?query=ASK{}",g).then(function(){return c.setToken(f),!0})["catch"](function(){return!1})}this.login=e}angular.module("facetApp").service("loginService",a),a.$inject=["$q","$http","authStorage","SPARQL_ENDPOINT_URL"]}(),function(){"use strict";angular.module("facetApp").filter("castArray",["_",function(a){return function(b){return a.castArray(b)}}])}(),function(){"use strict";function a(a,b,c){function d(){this.objectClass=Object}function e(a){return a.forEach(function(a){a.hasImage=!!a.images,a.images=a.images?b.castArray(a.images):["images/person_placeholder.cd371769.svg"],a.hasOwnProperty("wikipedia")&&(a.wikipedia="https://en.wikipedia.org/wiki/"+a.wikipedia)}),a}d.prototype.postProcess=e;var f=Object.getPrototypeOf(c);return d.prototype=angular.extend({},f,d.prototype),new d}angular.module("facetApp").factory("personMapperService",a),a.$inject=["$sce","_","objectMapperService"]}(),function(){"use strict";function a(a,b,c){function d(){this.objectClass=Object}function e(a){return a}d.prototype.postProcess=e;var f=Object.getPrototypeOf(c);return d.prototype=angular.extend({},f,PersonMapper.prototype),new d}angular.module("facetApp").factory("eventMapperService",a),a.$inject=["$sce","_","objectMapperService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(a){return v.getResults(a,m())}function i(b){var c=p+r,d="VALUES ?id { <"+b+"> } . ";return w.getObjects(c.replace("<RESULT_SET>",d)).then(function(b){return b.length?b[b.length-1]:a.reject("Not found")})}function j(){var b=angular.copy(o);return a.when(b)}function k(){return t}function l(a){var c=b.search().sortBy||"?birthDate";c===a&&b.search("desc",b.search().desc?null:!0),b.search("sortBy",a)}function m(){var a=b.search().sortBy;c.isString(a)||(a="?birthDate");var d;return d=b.search().desc?"DESC("+a+")":a,"?birthDate"===a?d:d+" ?birthDate"}function n(a,c){var d=b.search().sortBy||"?birthDate",e=c?"glyphicon-sort-by-order":"glyphicon-sort-by-alphabet";return d===a?b.search().desc?e+"-alt":e:void 0}this.getResults=h,this.getFacets=j,this.getFacetOptions=k,this.updateSortBy=l,this.getSortClass=n,this.getPerson=i;var o={entryText:{facetId:"entryText",graph:"<http://ldf.fi/congress/people>",name:"Search",enabled:!0},link:{facetId:"link",choices:[{id:"wikipedia",pattern:"?id <http://ldf.fi/congress/wikipedia_id> [] .",label:"Wikipedia"},{id:"twitter",pattern:"?id <http://ldf.fi/congress/twitter> [] .",label:"Twitter"}],enabled:!0,name:"Links"},familyName:{facetId:"familyName",predicate:"<http://schema.org/familyName>",name:"Family Name"},birthYear:{facetId:"birthYear",predicate:"<http://schema.org/birthDate>",name:"Date of Birth",enabled:!0},gender:{facetId:"gender",predicate:"<http://schema.org/gender>",name:"Gender",enabled:!0}},p=" PREFIX owl: <http://www.w3.org/2002/07/owl#>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX dct: <http://purl.org/dc/terms/>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX xml: <http://www.w3.org/XML/1998/namespace>  PREFIX congress: <http://ldf.fi/congress/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> ",q=" SELECT DISTINCT * WHERE {  {     <RESULT_SET>   }   	?id schema:familyName ?familyName .   	OPTIONAL { ?id schema:givenName ?givenName . }   OPTIONAL { ?id schema:birthDate ?birthDate . }     OPTIONAL { ?id schema:birthPlace ?birthPlace . }     OPTIONAL { ?id schema:deathDate ?deathDate . }     OPTIONAL { ?id schema:deathPlace ?deathPlace . }      OPTIONAL { ?id congress:twitter ?twitter . }   OPTIONAL { ?id congress:wikipedia_id ?wikipedia . }  	OPTIONAL { ?id schema:gender ?gender . }  	OPTIONAL { ?id schema:image ?images . } }",r="SELECT DISTINCT * WHERE {  {     <RESULT_SET>   }   ?id schema:familyName ?familyName .   	  OPTIONAL { ?id schema:givenName ?givenName . } 	  OPTIONAL { ?id schema:birthDate ?birthDate . }     OPTIONAL { ?id schema:birthPlace ?birthPlace . }     OPTIONAL { ?id schema:deathDate ?deathDate . }     OPTIONAL { ?id schema:deathPlace ?deathPlace . }     OPTIONAL { ?id congress:wikipedia_id ?wikipedia . }  	  OPTIONAL { ?id congress:wikidata ?wikidata . }  	  OPTIONAL { ?id schema:gender ?gender . }  	OPTIONAL { ?id schema:image ?images . }	OPTIONAL { ?id schema:hasOccupation ?occupation . }  OPTIONAL { ?id congress:bioguide_id ?committee__id .    	?mship congress:bioguide_id ?committee__id ;            congress:committee ?committee__label ;            schema:memberOf ?committee__memberOf .  }}",s={endpointUrl:e,usePost:!0},t={endpointUrl:s.endpointUrl,rdfClass:"<http://schema.org/Person>",constraint:"?id <http://schema.org/familyName> ?familyName . ?id <http://schema.org/birthDate> ?birthDate . ",preferredLang:"en",noSelectionString:"-- No selection --"},u={mapper:g,queryTemplate:q,prefixes:p,paging:!0,pagesPerQuery:2},v=new d(s,u),w=new f(s,g)}angular.module("facetApp").service("nbfService",a),a.$inject=["$q","$location","_","FacetResultHandler","SPARQL_ENDPOINT_URL","AdvancedSparqlService","personMapperService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(b){var c=m+n,d="VALUES ?idorg { <"+b+"> } . ?idorg owl:sameAs* ?pc . ";return q.getObjects(c.replace("<RESULT_SET>",d)).then(function(b){return b.length?b:a.reject("No events found")})}function i(){var b=angular.copy(facets);return a.when(b)}function j(){return facetOptions}function k(a){var c=b.search().sortBy||"?ordinal";c===a&&b.search("desc",b.search().desc?null:!0),b.search("sortBy",a)}function l(a,c){var d=b.search().sortBy||"?ordinal",e=c?"glyphicon-sort-by-order":"glyphicon-sort-by-alphabet";return d===a?b.search().desc?e+"-alt":e:void 0}this.getFacets=i,this.getFacetOptions=j,this.updateSortBy=k,this.getSortClass=l,this.getEvents=h;var m=" PREFIX owl: <http://www.w3.org/2002/07/owl#>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX dct: <http://purl.org/dc/terms/>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX xml: <http://www.w3.org/XML/1998/namespace>  PREFIX bioc: <http://ldf.fi/schema/bioc/>  PREFIX nbf: <http://ldf.fi/nbf/>  PREFIX categories: <http://ldf.fi/nbf/categories/>  PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>  PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>  PREFIX gvp: <http://vocab.getty.edu/ontology#> ",n=' SELECT DISTINCT * WHERE {  {     <RESULT_SET>   }   ?pc a nbf:PersonConcept ;       foaf:focus ?prs ;   		skosxl:prefLabel ?ilabel .   OPTIONAL { ?ilabel schema:givenName ?givenName }   OPTIONAL { ?ilabel schema:familyName ?familyName }   { ?pc bioc:has_family_relation ?id . 		?id bioc:inheres_in ?relative }   UNION   { ?id crm:P100_was_death_of ?prs . }   UNION   { ?id crm:P98_brought_into_life ?prs . }   UNION   { ?id bioc:inheres_in ?prs . }    ?id a/skos:prefLabel ?class . FILTER (lang(?class)="en")   ?id nbf:time ?time . 		OPTIONAL { ?time gvp:estStart ?time__start. }   		OPTIONAL { ?time gvp:estEnd ?time__end. }   		OPTIONAL { ?time skos:prefLabel ?time__label. }   	    BIND ( CONCAT(	        IF(bound(?time__start),str(year(?time__start)),"")	        ,"-", 	        IF(bound(?time__end),str(year(?time__end)),"")	      ) AS ?time__span)   OPTIONAL { ?id skos:prefLabel ?label }   OPTIONAL { ?id nbf:place ?place__uri .     	?place__uri geo:lat ?place__latitude ;             geo:long ?place__longitude  ;    		skos:prefLabel ?place__name .  }  } ORDER BY ?time__start DESC(?time__end)',o={endpointUrl:e,usePost:!0},p={mapper:g,queryTemplate:n,prefixes:m,paging:!0,pagesPerQuery:2},q=(new d(o,p),new f(o,g))}angular.module("facetApp").service("mapService",a),a.$inject=["$q","$location","_","FacetResultHandler","SPARQL_ENDPOINT_URL","AdvancedSparqlService","personMapperService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(a){var b=n+o.replace("<RESULT_SET>",a.constraint.join(" ")).replace("<STARTYEAR>",a.minYear).replace("<ENDYEAR>",a.maxYear);return s.getObjectsNoGrouping(b)}function i(){var b=angular.copy(m);return a.when(b)}function j(){return q}function k(a){var c=b.search().sortBy||"?ordinal";c===a&&b.search("desc",b.search().desc?null:!0),b.search("sortBy",a)}function l(a,c){var d=b.search().sortBy||"?ordinal",e=c?"glyphicon-sort-by-order":"glyphicon-sort-by-alphabet";return d===a?b.search().desc?e+"-alt":e:void 0}this.getResults=h,this.getFacets=i,this.getFacetOptions=j,this.updateSortBy=k,this.getSortClass=l;var m={entryText:{facetId:"entryText",graph:"<http://ldf.fi/nbf/people>",name:"Haku",enabled:!0},link:{facetId:"link",choices:[{id:"wikipedia",pattern:"?id <http://ldf.fi/nbf/wikipedia> [] .",label:"Wikipedia"},{id:"wikidata",pattern:"?id <http://ldf.fi/nbf/wikidata> [] .",label:"Wikidata"},{id:"sotasampo",pattern:"?id <http://ldf.fi/nbf/warsampo> [] .",label:"Sotasampo"},{id:"norssit",pattern:"?id <http://ldf.fi/nbf/norssi> [] .",label:"Norssit"},{id:"kirjasampo",pattern:"?id <http://ldf.fi/nbf/kirjasampo> [] . ",label:"Kirjasampo"},{id:"blf",pattern:"?id <http://ldf.fi/nbf/blf> [] .",label:"BLF"},{id:"ulan",pattern:"?id <http://ldf.fi/nbf/ulan> [] .",label:"ULAN"},{id:"viaf",pattern:"?id <http://ldf.fi/nbf/viaf> [] .",label:"VIAF"},{id:"genicom",pattern:"?id <http://ldf.fi/nbf/genicom> [] .",label:"Geni.com"},{id:"website",pattern:"?id <http://ldf.fi/nbf/website> [] .",label:"Kotisivu"},{id:"eduskunta",pattern:"?id <http://ldf.fi/nbf/eduskunta> [] .",label:"Eduskunta"}],enabled:!0,name:"Linkit"},period:{facetId:"period",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_period>/<http://www.w3.org/2004/02/skos/core#prefLabel>",name:"Ajanjakso",enabled:!0},dataset:{facetId:"dataset",predicate:"<http://purl.org/dc/terms/source>",name:"Tietokanta"},birthYear:{facetId:"birthYear",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://www.cidoc-crm.org/cidoc-crm/P98_brought_into_life>/<http://ldf.fi/nbf/time>",name:"Synnyinaika",enabled:!0},place:{facetId:"place",predicate:"<http://xmlns.com/foaf/0.1/focus>/(^<http://www.cidoc-crm.org/cidoc-crm/P98_brought_into_life>|^<http://www.cidoc-crm.org/cidoc-crm/P100_was_death_of>)/<http://ldf.fi/nbf/place>/<http://www.w3.org/2004/02/skos/core#prefLabel>",name:"Paikkakunta",enabled:!0},deathYear:{facetId:"birthYear",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://www.cidoc-crm.org/cidoc-crm/P100_was_death_of>/<http://ldf.fi/nbf/time>",name:"Kuolinaika",enabled:!0},title:{facetId:"title",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://ldf.fi/schema/bioc/inheres_in>/<http://ldf.fi/nbf/has_title>",name:"Arvo tai ammatti",hierarchy:"<http://www.w3.org/2004/02/skos/core#broader>",depth:3,enabled:!0},company:{facetId:"company",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://ldf.fi/schema/bioc/inheres_in>/<http://ldf.fi/nbf/related_company>",name:"Yritys tai yhteisö",enabled:!0},category:{facetId:"category",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_category>",name:"Kategoria",enabled:!0},gender:{facetId:"gender",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/sukupuoli>",name:"Sukupuoli",enabled:!0}},n=" PREFIX owl: <http://www.w3.org/2002/07/owl#>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX dct: <http://purl.org/dc/terms/>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX xml: <http://www.w3.org/XML/1998/namespace>  PREFIX bioc: <http://ldf.fi/schema/bioc/>  PREFIX nbf: <http://ldf.fi/nbf/>  PREFIX categories:	<http://ldf.fi/nbf/categories/>  PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>  PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>  PREFIX gvp: <http://vocab.getty.edu/ontology#> ",o='SELECT DISTINCT ?id ?evt ?time__start ?time__end ?class ?place__uri ?place__latitude ?place__longitude WHERE {   { SELECT DISTINCT ?id WHERE {   { <RESULT_SET> } 	?id foaf:focus ?prs .   	?prs ^crm:P98_brought_into_life/nbf:time/gvp:estStart ?time__birth .   	?prs ^crm:P100_was_death_of/nbf:time/gvp:estStart ?time__death .   	FILTER (<STARTYEAR><=year(?time__birth) && year(?time__birth)<=<ENDYEAR>) 	} LIMIT 2500 }   	?id foaf:focus ?prs .   { ?evt crm:P100_was_death_of ?prs . }   UNION   { ?evt crm:P98_brought_into_life ?prs . }     ?evt nbf:time ?time .   OPTIONAL { ?time gvp:estStart ?time__start. }   OPTIONAL { ?time gvp:estEnd ?time__end. }   FILTER (BOUND(?time__start) || BOUND(?time__end))      ?evt a/skos:prefLabel ?class .   FILTER (lang(?class)="en")     ?evt nbf:place ?place__uri .      ?place__uri geo:lat ?place__latitude ;             geo:long ?place__longitude .  } LIMIT 1500 ',p={endpointUrl:e,usePost:!0},q={endpointUrl:p.endpointUrl,rdfClass:"<http://ldf.fi/nbf/PersonConcept>",constraint:"?id <http://ldf.fi/nbf/ordinal> ?ordinal . ",preferredLang:"fi",noSelectionString:"-- Ei valintaa --"},r={mapper:g,queryTemplate:o,prefixes:n,paging:!1,pagesPerQuery:1},s=(new d(p,r),new f(p,g))}angular.module("facetApp").service("groupmapService",a),a.$inject=["$q","$location","_","FacetResultHandler","SPARQL_ENDPOINT_URL","AdvancedSparqlService","personMapperService"]}(),function(){"use strict";function a(a,b,c,d){function e(a,d){var e="navbar-fi.html";return b(e).then(function(a){return d.html(a),b("views/subnavbar.html")}).then(function(b){return angular.element("#subnav").html(b),c(d.contents())(a)})}function f(){function a(){d.open({templateUrl:"views/help.html",size:"lg"})}var b=this;b.showHelp=a}return{link:e,controller:f,controllerAs:"vm"}}angular.module("facetApp").directive("wsNavbar",a),a.$inject=["$location","$templateRequest","$compile","$uibModal"]}(),function(){"use strict";function a(a,b,c){function d(){return c.login(e.un,e.pw).then(function(c){return c?a.transitionTo("cards",b,{reload:!0,inherit:!1,notify:!0}):void(e.error="Failed to log in")})}var e=this;e.login=d}angular.module("facetApp").controller("LoginController",a),a.$inject=["$state","$stateParams","loginService"]}(),function(){"use strict";function a(a,b,c,d){function e(){d.getPerson(a.personId).then(function(a){return h.person=a,a})["catch"](g)}function f(){b.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return h.person}}})}function g(a){h.isLoadingResults=!1,h.error=a}var h=this;h.openPage=f,e()}angular.module("facetApp").controller("DetailController",a),a.$inject=["$stateParams","$uibModal","_","nbfService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){b.reload()}function k(){r.tableParams=new g({count:e},{getData:n})}function l(a){c.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return a}}})}function m(){var a=f.getFacetOptions();return a.initialState=i.getFacetValuesFromUrlParams(),a}function n(a){return r.isLoadingResults=!0,r.pager.getPage(a.page()-1,a.count()).then(function(a){return r.pager.getTotalCount().then(function(b){return r.tableParams.total(b),a}).then(function(a){return r.isLoadingResults=!1,a})})}function o(a,b){return i.updateUrlParams(b),r.previousSelections=d.clone(b.constraint),p(b)}function p(a){r.isLoadingResults=!0,f.getResults(a).then(function(a){r.pager=a,r.tableParams?(r.tableParams.page(1),r.tableParams.reload()):k()})}function q(a){return f.updateSortBy(a),p({constraint:r.previousSelections})}var r=this;r.openPage=l,r.removeFacetSelections=j,r.sortBy=q,r.getSortClass=f.getSortClass;var s=a.$on("sf-initial-constraints",function(a,b){o(a,b),s()});a.$on("sf-facet-constraints",o),f.getFacets().then(function(b){r.facets=b,r.facetOptions=m(),r.facetOptions.scope=a,r.handler=new h(r.facetOptions)})}angular.module("facetApp").controller("TableController",a),a.$inject=["$scope","$state","$uibModal","_","RESULTS_PER_PAGE","nbfService","NgTableParams","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function a(a,b,c,d){function e(){d.getEvents(a.personId).then(function(a){return m.currentEvent=".",m.events=a,a.length&&(m.person=a[0]),m.events=f(a,m),m.viewBox="1930,-10,120,27",h(m),a})["catch"](k)}function f(a,b){var c=(new Date).getFullYear(),d=!1,e=0;b.min_time=c,b.max_time=0;var f={};a.forEach(function(a){a.place&&a.place.uri&&(["uri","latitude","longitude"].forEach(function(b){a.place[b]&&a.place[b].constructor!==Array&&(a.place[b]=[a.place[b]])}),a.place.uri.forEach(function(b){f.hasOwnProperty(b)||(f[b]={count:0,latitude:a.place.latitude,longitude:a.place.longitude,type:a["class"]}),f[b].count+=1}))});var h=[[],[],[],[]];return a.forEach(function(a){a.y=0,a.r=1,a.markers=[],a.blobs=[],a.time.span.constructor!==Array&&(a.time.span=[a.time.span]),a.time.span.forEach(function(c){var d=c.split("-"),e={};""!=d[0]&&(d[0]=parseInt(d[0]),d[0]<b.min_time&&(b.min_time=d[0]),b.max_time<d[0]&&(b.max_time=d[0]),e.estStart=d[0]),""!=d[1]&&(d[1]=parseInt(d[1]),d[1]<b.min_time&&(b.min_time=d[1]),b.max_time<d[1]&&(b.max_time=d[1]),e.estEnd=d[1]),a.blobs.push(e)}),a.label||(a.label=""),a["class"]||(a["class"]="event"),a["class"]=a["class"].toLowerCase();var c=0;switch(a["class"]){case"death":d=!0,a.label="Kuollut "+a.label,a.r=1.5;break;case"birth":a.label="Syntynyt "+a.label,a.place&&a.place.latitude&&(b.map.center={latitude:a.place.latitude[0],longitude:a.place.longitude[0]}),a.r=1.5,b.min_time<a.blobs[0].estStart&&(b.min_time=a.blobs[0].estStart);break;case"spouse":case"child":a.relative&&(a.relativelink="http://localhost:9000/#!/"+a.relative.replace(/[\/]/g,"~2F")),a.label=a.label+", "+a.time.label;break;case"career":a.y=5,c=1;break;case"product":a.y=10,c=2;break;case"honour":a.y=15,c=3;break;default:console.log(a["class"]),a.y=15,a["class"]="event",c=3}if(h[c].push(a),a.id=++e,a.place&&a.place.latitude)for(var i=0;i<a.place.latitude.length;i++){var j=a.place.uri[i]&&f[a.place.uri[i]]&&f[a.place.uri[i]].count?15*Math.sqrt(f[a.place.uri[i]].count):15,k=g(a.place.latitude[i],a.place.longitude[i],a.id,a["class"],j);a.markers.push(k),b.markers.push(k)}}),h.forEach(function(a){l(a).forEach(function(b){a[b].y+=2.5})}),d||(b.max_time+=15),b.max_time<=b.min_time&&(b.max_time=b.min_time+75),b.max_time>b.min_time+150&&(b.max_time=b.min_time+150),b.max_time>c&&(b.max_time=c),a.forEach(function(a){a.path="";var c=.1*Math.random();a.blobs.forEach(function(d){var e=d.estStart?i(d.estStart,b.min_time,b.max_time)+c:void 0,f=d.estEnd?i(d.estEnd,b.min_time,b.max_time)+c:void 0;e?f?a.path+="M"+e+","+(a.y-a.r)+" a"+a.r+","+a.r+",0,0,0,0,"+2*a.r+" H"+f+" a"+a.r+","+a.r+",0,0,0,0,-"+2*a.r+" Z":(f=e+3,a.path+="M"+f+","+(a.y-a.r)+" H"+e+" a"+a.r+","+a.r+",0,0,0,0,"+2*a.r+" H"+f):(e=f-3,a.path+="M"+e+","+(a.y+a.r)+" H"+f+" a"+a.r+","+a.r+",0,0,0,0,-"+2*a.r+" H"+e)}),a.blobs=[]}),a}function g(a,b,c,d,e){e||(e=15);var f={death:"#ff4141",birth:"#777fff",spouse:"#c3b981",child:"#7f6780",career:"#999999",product:"#83d236",honour:"#ce5c00",event:"#ABCDEF"},g={latitude:a,longitude:b,id:n++,options:{icon:{path:"M-"+e+" 0 A "+e+","+e+", 0 ,1, 1,"+e+",0 A"+e+","+e+",0,1,1,-"+e+",0 Z",scale:1,anchor:new google.maps.Point(0,0),fillColor:f[d],fillOpacity:.6,strokeOpacity:.5,strokeWeight:1,labelOrigin:new google.maps.Point(0,0)},zIndex:c,optimized:!1,label:{text:""+c,fontSize:"14px",fontFamily:'"Courier New", Courier,Monospace',color:"black"}}};return g}function h(a){for(var b=a.min_time,c=a.max_time,d=[],e=[],f=10*Math.ceil(b/10);c>f;f+=10){var g=i(f,b,c);d.push({x1:g,x2:g,y1:0,y2:15}),e.push({x:g,y:-3,year:""+f})}for(var h=0;20>h;h+=5)d.push({x1:i(b,b,c),x2:i(c,b,c),y1:h,y2:h});a.mainline={lines:d,texts:e}}function i(a,b,c){return a-b}function j(){b.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return m.person}}})}function k(a){m.isLoadingResults=!1,m.error=a}function l(a){for(var b={},c=a.length,d=0;c>d;d++)a[d].blobs.forEach(function(a){for(var c=a.estStart?a.estStart:a.estEnd-3,e=a.estEnd?a.estEnd:c+3,f=c;e>=f;f++)b[f]=d});var e=Array(c).fill(!1);for(var f in b)e[b[f]]=!0;for(var g=[],d=0;c>d;d++)e[d]||g.push(d);return g}var m=this;m.openPage=j,m.map={center:{latitude:62,longitude:24},zoom:6},m.markers=[],m.focusEvent=function(a){m.currentEvent=a.id+": "+a.label,a.markers.forEach(function(a){a.options.icon.strokeWeight=4,a.options.zIndex+=100,setTimeout(function(){a.options.animation=null},1200)})},m.unfocusEvent=function(a){m.currentEvent=".",a.markers.forEach(function(a){a.options.icon.strokeWeight=1,a.options.zIndex-=100})},e();var n=1}angular.module("facetApp").controller("MapController",a),a.$inject=["$stateParams","$uibModal","_","mapService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){c.reload()}function j(){var a=f.getFacetOptions();return a.initialState=h.getFacetValuesFromUrlParams(),a}function k(){return q.isLoadingResults||nextPageNo>maxPage}function l(a,b){return q.previousSelections&&e.isEqual(b.constraint,q.previousSelections)?void 0:(q.previousSelections=e.clone(b.constraint),h.updateUrlParams(b),m(b))}function m(b){q.isLoadingResults=!0,q.people=[],q.error=void 0,b.minYear=a.minRangeSlider.minValue,b.maxYear=a.minRangeSlider.maxValue;var c=e.uniqueId();return s=c,f.getResults(b).then(function(a){q.events=o(a,q)})["catch"](n)}function n(a){q.isLoadingResults=!1,q.error=a}function o(a,b){var c={};a.forEach(function(a){a["class"]||(a["class"]="event"),a["class"]=a["class"].toLowerCase();var b=a["class"]+a.place.uri;c.hasOwnProperty(b)||(c[b]={count:0,latitude:a.place.latitude,longitude:a.place.longitude,type:a["class"]}),c[b].count+=1}),b.markers=[];var d=0;for(var e in c){var f=c[e],g=p(f.latitude,f.longitude,++d,f.type,5*Math.sqrt(f.count));b.markers.push(g)}var h=new google.maps.LatLngBounds,i=document.getElementById("ui-gmap-google-map");return i&&i.fitBounds&&i.fitBounds(h),a}function p(a,b,c,d,e){e||(e=5);var f={death:"#ff4141",birth:"#777fff",spouse:"#c3b981",child:"#7f6780",career:"#999999",product:"#83d236",honour:"#ce5c00",event:"#ABCDEF"},g={latitude:a,longitude:b,id:c,options:{icon:{path:"M-"+e+" 0 A "+e+","+e+", 0 ,1, 1,"+e+",0 A"+e+","+e+",0,1,1,-"+e+",0 Z",scale:1,anchor:new google.maps.Point(0,0),fillColor:f[d],fillOpacity:.6,strokeOpacity:.2,strokeWeight:1,labelOrigin:new google.maps.Point(0,0)},optimized:!1}};return g}a.minRangeSlider={minValue:(new Date).getFullYear()-100,maxValue:(new Date).getFullYear(),options:{floor:1e3,ceil:(new Date).getFullYear(),step:10,draggableRange:!0,onEnd:function(){m({constraint:q.previousSelections})}}};var q=this;q.map={center:{latitude:62,longitude:24},zoom:6},q.markers=[],q.isScrollDisabled=k,q.removeFacetSelections=i,q.getSortClass=f.getSortClass,q.people=[];var r=a.$on("sf-initial-constraints",function(a,b){l(a,b),r()});a.$on("sf-facet-constraints",l),f.getFacets().then(function(b){q.facets=b,q.facetOptions=j(),q.facetOptions.scope=a,q.handler=new g(q.facetOptions)});var s}angular.module("facetApp").controller("GroupmapController",a),a.$inject=["$scope","$location","$state","$uibModal","_","groupmapService","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){c.reload()}function j(a){d.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return a}}})}function k(){var a=f.getFacetOptions();return a.initialState=h.getFacetValuesFromUrlParams(),a}function l(){var a=e.uniqueId();v=a,t.isLoadingResults=!0,r++<=s?t.pager.getPage(r-1,24).then(function(b){a===v&&(t.people=t.people.concat(b),t.isLoadingResults=!1)})["catch"](q):t.isLoadingResults=!1}function m(){return t.isLoadingResults||r>s}function n(a){return f.updateSortBy(a),p({constraint:t.previousSelections})}function o(a,b){return t.previousSelections&&e.isEqual(b.constraint,t.previousSelections)?void 0:(t.previousSelections=e.clone(b.constraint),h.updateUrlParams(b),p(b))}function p(a){t.isLoadingResults=!0,t.people=[],t.error=void 0;var b=e.uniqueId();w=b,r=0,f.getResults(a).then(function(a){return a.getMaxPageNo().then(function(b){return[a,b]})}).then(function(a){return w===b?(t.pager=a[0],s=a[1],t.isLoadingResults=!1,l()):void 0})["catch"](q)}function q(a){t.isLoadingResults=!1,t.error=a}var r,s,t=this;t.openPage=j,t.nextPage=l,t.isScrollDisabled=m,t.removeFacetSelections=i,t.sortBy=n,t.getSortClass=f.getSortClass,t.people=[];var u=a.$on("sf-initial-constraints",function(a,b){o(a,b),u()});a.$on("sf-facet-constraints",o),f.getFacets().then(function(b){t.facets=b,t.facetOptions=k(),t.facetOptions.scope=a,t.handler=new g(t.facetOptions)});var v,w}angular.module("facetApp").controller("CardsController",a),a.$inject=["$scope","$location","$state","$uibModal","_","nbfService","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){d.reload()}function j(){var a=f.getFacetOptions();return a.initialState=h.getFacetValuesFromUrlParams(),a}function k(a,b){return r.previousSelections&&e.isEqual(b.constraint,r.previousSelections)?void 0:(r.previousSelections=e.clone(b.constraint),h.updateUrlParams(b),p(b).then(function(a){google.charts.setOnLoadCallback(function(){l("occupation","Myöhempi arvo tai ammatti","chart_occupation")}),google.charts.setOnLoadCallback(function(){l("organization","Työnantajat tai jäsenyydet järjestöissä","chart_organization")}),google.charts.setOnLoadCallback(function(){l("eduorganization","Opiskelupaikkoja Norssin jälkeen","chart_eduorganization")}),google.charts.setOnLoadCallback(function(){l("education","Koulutus Norssin jälkeen","chart_education")}),google.charts.setOnLoadCallback(m)}))}function l(a,b,c){var d=n(r.people,a),e=google.visualization.arrayToDataTable([[b,"Lukumäärä"]].concat(d)),f={title:b},g=new google.visualization.PieChart(document.getElementById(c));g.draw(e,f)}function m(){var a="education",b="eduorganization",c={},d={},e=10;$.each(r.people,function(e,f){if(f.hasOwnProperty(a)&&f.hasOwnProperty(b)){var g=f[a],h=f[b];c.hasOwnProperty(g)?c[g]+=1:c[g]=1,d.hasOwnProperty(h)?d[h]+=1:d[h]=1}}),c=$.map(c,function(a,b){return[[b,a]]}).sort(function(a,b){return b[1]-a[1]}),d=$.map(d,function(a,b){return[[b,a]]}).sort(function(a,b){return b[1]-a[1]});var f={},g={};$.each(c,function(a,b){f[b[0]]={index:e-1>a?a:e-1}}),$.each(d,function(a,b){g[b[0]]={index:e-1>a?a:e-1}});var h=$.map(new Array(Math.min(e,c.length)),function(a,b){return[$.map(new Array(Math.min(e,d.length)),function(a,b){return 0})]});$.each(r.people,function(c,d){if(d.hasOwnProperty(a)&&d.hasOwnProperty(b)){var e=d[a],i=d[b];h[f[e].index][g[i].index]+=1}});for(var i=[],j=0;j<h.length;j++)for(var k=0;k<h[j].length;k++)i.push([e-1>k?d[k][0]:"muu laitos",e-1>j?c[j][0]:"muu arvo",h[j][k]]);var l=new google.visualization.DataTable;l.addColumn("string",b),l.addColumn("string",a),l.addColumn("number","Weight"),l.addRows(i);var m={title:"Otsikko",sankey:{node:{label:{fontSize:14,color:"#000",bold:!0},labelPadding:12}}},n=new google.visualization.Sankey(document.getElementById("chart_sankey"));n.draw(l,m)}function n(a,b){return o(a,b).sort(function(a,b){return b[1]-a[1]})}function o(a,b){var c={};return $.each(a,function(a,d){if(d.hasOwnProperty(b)){var e=d[b];c.hasOwnProperty(e)?c[e]+=1:c[e]=1}}),$.map(c,function(a,b){return[[b,a]]})}function p(a){r.isLoadingResults=!0,r.people=[],r.years=[],r.topTitles=[],r.topOrgs=[],r.error=void 0;var b=e.uniqueId();return t=b,f.getResults2(a).then(function(a){return t===b?(r.isLoadingResults=!1,r.people=a[0],a):void 0})["catch"](q)}function q(a){console.log(a),r.isLoadingResults=!1,r.error=a}var r=this;r.people=[],r.startYear=[],r.topTitles=[],r.topOrgs=[],r.removeFacetSelections=i,google.charts.load("current",{packages:["corechart","line","sankey"]});var s=a.$on("sf-initial-constraints",function(a,b){k(a,b),s()});a.$on("sf-facet-constraints",k),f.getFacets().then(function(b){r.facets=b,r.facetOptions=j(),r.facetOptions.scope=a,r.handler=new g(r.facetOptions)});var t}angular.module("facetApp").controller("VisuController",a),a.$inject=["$scope","$location","$q","$state","_","visuService","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){d.reload()}function j(){var a=f.getFacetOptions();return a.initialState=h.getFacetValuesFromUrlParams(),a}function k(a,b){return s.previousSelections&&e.isEqual(b.constraint,s.previousSelections)?void 0:(s.previousSelections=e.clone(b.constraint),h.updateUrlParams(b),q(b).then(function(a){google.charts.setOnLoadCallback(function(){l(s.ages,[1,120],"Elinikä","chart_age")}),google.charts.setOnLoadCallback(function(){l(s.marriageAges,[1,120],"Naimisiinmenoikä","chart_marriageAge")}),google.charts.setOnLoadCallback(function(){l(s.firstChildAges,[1,120],"Lapsensaanti-ikä","chart_firstChildAge")}),google.charts.setOnLoadCallback(function(){l(s.numberOfChildren,[1,25],"Lasten lukumäärä","chart_numberOfChildren")}),google.charts.setOnLoadCallback(function(){l(s.numberOfSpouses,[1,7],"Puolisoiden lukumäärä","chart_numberOfSpouses")})}))}function l(a,b,c,d){var e=$.map(o(a,b),function(a,b){return[[a[0],a[1]]]}),f=n(e),g=new google.visualization.DataTable,h={title:c+", keskiarvo: "+f[0].toFixed(2)+", keskihajonta: "+f[1].toFixed(2),legend:{position:"none"},tooltip:{format:"none"},colors:["blue"],hAxis:{slantedText:!1,maxAlternation:1,format:"",ticks:m(b)},vAxis:{maxValue:4},width:"95%",bar:{groupWidth:"88%"},height:500},i=new google.visualization.ColumnChart(document.getElementById(d));
g.addColumn("number","Ikä"),g.addColumn("number","Henkilöä"),g.addRows(e),i.draw(g,h)}function m(a){for(var b=[],c=10*Math.floor(1+a[0]/10);c<a[1];)b.push(c),c+=10;return b}function n(a){var b=0,c=0,d=0;if($.each(a,function(a,e){var f=e[0]*e[1];b+=f,c+=e[0]*f,d+=e[1]}),d>0){var e=b/d;return[e,Math.sqrt(c/d-e*e)]}return[0,0]}function o(a,b){var c=[];if($.each(a,function(a,b){c.push([parseInt(b.value),parseInt(b.count)])}),c=p(c,b),c.length<2){var d=parseInt(c[0][0])-1;c=[[d,0]].concat(c),d=parseInt(c[c.length-1][0])+1,c.push([d,0])}return c}function p(a,b){if(a.length<2)return a;a.push([b[1],0]);var c=[],d=parseInt(a[0][0]);d>b[0]&&(a.unshift([b[0],0]),d=b[0]);for(var e=0;e<a.length;e++){for(var f=parseInt(a[e][0]);f>d;)c.push([d,0]),d++;c.push(a[e]),d++}return c}function q(a){s.isLoadingResults=!0,s.ages=[],s.marriageAges=[],s.firstChildAges=[],s.numberOfChildren=[],s.numberOfSpouses=[],s.error=void 0;var b=e.uniqueId();return u=b,f.getResults(a).then(function(a){return u===b?(s.isLoadingResults=!1,s.ages=a[0],s.marriageAges=a[1],s.firstChildAges=a[2],s.numberOfChildren=a[3],s.numberOfSpouses=a[4],a):void 0})["catch"](r)}function r(a){console.log(a),s.isLoadingResults=!1,s.error=a}var s=this;s.people=[],s.startYear=[],s.removeFacetSelections=i,google.charts.load("current",{packages:["corechart","line"]});var t=a.$on("sf-initial-constraints",function(a,b){k(a,b),t()});a.$on("sf-facet-constraints",k),f.getFacets().then(function(b){s.facets=b,s.facetOptions=j(),s.facetOptions.scope=a,s.handler=new g(s.facetOptions)});var u}angular.module("facetApp").controller("VisuController2",a),a.$inject=["$scope","$location","$q","$state","_","visuService","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(a){var b=a.constraint.join(" "),c=r.replace("<RESULT_SET>",b);return x.getObjectsNoGrouping(c)}function h(a){var b=a.constraint.join(" "),c=s.replace("<RESULT_SET>",b);return x.getObjectsNoGrouping(c)}function i(a){var b=a.constraint.join(" "),c=q.replace("<RESULT_SET>",b);return x.getObjectsNoGrouping(c)}function j(a){var b=a.constraint.join(" "),c=t.replace(/<RESULT_SET>/g,b);return x.getObjectsNoGrouping(c)}function k(a){var b=a.constraint.join(" "),c=u.replace("<RESULT_SET>",b);return x.getObjectsNoGrouping(c)}function l(b){var c=[this.getAge(b),this.getMarriageAge(b),this.getFirstChildAge(b),this.getNumberOfChildren(b),this.getNumberOfSpouses(b)];return a.all(c)}function m(){var b=angular.copy(o);return a.when(b)}function n(){return w}this.getAge=i,this.getMarriageAge=g,this.getFirstChildAge=h,this.getNumberOfChildren=j,this.getNumberOfSpouses=k,this.getResults=l,this.getFacets=m,this.getFacetOptions=n;var o={entryText:{facetId:"entryText",graph:"<http://ldf.fi/nbf/people>",name:"Haku",enabled:!0},link:{facetId:"link",choices:[{id:"wikipedia",pattern:"?id <http://ldf.fi/nbf/wikipedia> [] .",label:"Wikipedia"},{id:"wikidata",pattern:"?id <http://ldf.fi/nbf/wikidata> [] .",label:"Wikidata"},{id:"sotasampo",pattern:"?id <http://ldf.fi/nbf/warsampo> [] .",label:"Sotasampo"},{id:"norssit",pattern:"?id <http://ldf.fi/nbf/norssi> [] .",label:"Norssit"},{id:"kirjasampo",pattern:"?id <http://ldf.fi/nbf/kirjasampo> [] . ",label:"Kirjasampo"},{id:"blf",pattern:"?id <http://ldf.fi/nbf/blf> [] .",label:"BLF"},{id:"ulan",pattern:"?id <http://ldf.fi/nbf/ulan> [] .",label:"ULAN"},{id:"viaf",pattern:"?id <http://ldf.fi/nbf/viaf> [] .",label:"VIAF"},{id:"genicom",pattern:"?id <http://ldf.fi/nbf/genicom> [] .",label:"Geni.com"},{id:"website",pattern:"?id <http://ldf.fi/nbf/website> [] .",label:"Kotisivu"},{id:"eduskunta",pattern:"?id <http://ldf.fi/nbf/eduskunta> [] .",label:"Eduskunta"}],enabled:!0,name:"Linkit"},period:{facetId:"period",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_period>/<http://www.w3.org/2004/02/skos/core#prefLabel>",name:"Ajanjakso",enabled:!0},familyName:{facetId:"familyName",predicate:"<http://www.w3.org/2008/05/skos-xl#prefLabel>/<http://schema.org/familyName>",name:"Sukunimi"},dataset:{facetId:"dataset",predicate:"<http://purl.org/dc/terms/source>",name:"Tietokanta"},birthYear:{facetId:"birthYear",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://www.cidoc-crm.org/cidoc-crm/P98_brought_into_life>/<http://ldf.fi/nbf/time>",name:"Synnyinaika",enabled:!0},place:{facetId:"place",predicate:"<http://xmlns.com/foaf/0.1/focus>/(^<http://www.cidoc-crm.org/cidoc-crm/P98_brought_into_life>|^<http://www.cidoc-crm.org/cidoc-crm/P100_was_death_of>)/<http://ldf.fi/nbf/place>/<http://www.w3.org/2004/02/skos/core#prefLabel>",name:"Paikkakunta",enabled:!0},deathYear:{facetId:"birthYear",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://www.cidoc-crm.org/cidoc-crm/P100_was_death_of>/<http://ldf.fi/nbf/time>",name:"Kuolinaika",enabled:!0},title:{facetId:"title",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://ldf.fi/schema/bioc/inheres_in>/<http://ldf.fi/nbf/has_title>",name:"Arvo tai ammatti",hierarchy:"<http://www.w3.org/2004/02/skos/core#broader>",depth:3,enabled:!0},company:{facetId:"company",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://ldf.fi/schema/bioc/inheres_in>/<http://ldf.fi/nbf/related_company>",name:"Yritys tai yhteisö",enabled:!0},category:{facetId:"category",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_category>",name:"Kategoria",enabled:!0},gender:{facetId:"gender",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/sukupuoli>",name:"Sukupuoli",enabled:!0}},p="PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> PREFIX bioc:  <http://ldf.fi/schema/bioc/>  PREFIX rdfs:  <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX skos:  <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX	nbf:	<http://ldf.fi/nbf/>  PREFIX	categories:	<http://ldf.fi/nbf/categories/>  PREFIX	gvp:	<http://vocab.getty.edu/ontology#>	 PREFIX crm:   <http://www.cidoc-crm.org/cidoc-crm/>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX dcterms: <http://purl.org/dc/terms/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX gvp: <http://vocab.getty.edu/ontology#> PREFIX	relations:	<http://ldf.fi/nbf/relations/> PREFIX	sources:	<http://ldf.fi/nbf/sources/> ",q=p+"SELECT ?value (count(?value) AS ?count) WHERE {  { <RESULT_SET> }    ?id foaf:focus/^crm:P100_was_death_of/nbf:time [ gvp:estStart ?time ; gvp:estEnd ?time2 ] ;   	foaf:focus/^crm:P98_brought_into_life/nbf:time [ gvp:estStart ?birth ; gvp:estEnd ?birth2 ]   BIND (xsd:integer(0.5*(year(?time)+year(?time2)-year(?birth)-year(?birth2))) AS ?value)   FILTER (-1<?value && ?value<120) } GROUP BY ?value  ORDER BY ?value ",r=p+"SELECT ?value (count(?value) AS ?count) WHERE {   {     SELECT distinct ?id (min(?age) AS ?value) WHERE {     { <RESULT_SET> }     VALUES ?rel { relations:Spouse }     ?id bioc:has_family_relation [ a ?rel ;  nbf:time/gvp:estStart ?time ] ; 	         foaf:focus/^crm:P98_brought_into_life/nbf:time/gvp:estStart ?birth .     BIND (year(?time)-year(?birth) AS ?age)     FILTER (13<?age && ?age<120)     } GROUP BY ?id  } } GROUP BY ?value ORDER BY ?value ",s=p+"SELECT ?value (count(?value) AS ?count) WHERE {   {     SELECT distinct ?id (min(?age) AS ?value) WHERE {     { <RESULT_SET> }     VALUES ?rel { relations:Child relations:Son relations:Daughter }     ?id bioc:has_family_relation [ a ?rel ;  nbf:time/gvp:estStart ?time ] ; 	         foaf:focus/^crm:P98_brought_into_life/nbf:time/gvp:estStart ?birth .     BIND (year(?time)-year(?birth) AS ?age)     FILTER (13<?age && ?age<120)     } GROUP BY ?id  } } GROUP BY ?value ORDER BY ?value ",t=p+' SELECT ?value (count(?id) AS ?count) WHERE {   {   SELECT ?id (count(?rel) AS ?value)   WHERE {     { <RESULT_SET> }     VALUES ?rel { relations:Child relations:Son relations:Daughter }      ?id bioc:has_family_relation/a ?rel .     } GROUP BY ?id }   UNION   {     { <RESULT_SET> }   ?id dcterms:source sources:source1 ;     foaf:focus/nbf:has_biography/nbf:has_paragraph/nbf:id "2"^^xsd:integer .   FILTER not exists { ?id bioc:has_family_relation [ a relations:Child ]}   BIND (0 AS ?value)   } } GROUP BY ?value ORDER BY ?value ',u=p+"SELECT ?value (count(?id) AS ?count) WHERE {   SELECT ?id (count(?rel) AS ?value) WHERE {     { <RESULT_SET> }     VALUES ?rel { relations:Spouse }     ?id bioc:has_family_relation/a ?rel .   } GROUP BY ?id } GROUP BY ?value ORDER BY ?value ",v=f,w={endpointUrl:v,rdfClass:"<http://ldf.fi/nbf/PersonConcept>",preferredLang:"fi"},x=new d(v,e)}angular.module("facetApp").service("visuService",a),a.$inject=["$q","$location","_","AdvancedSparqlService","objectMapperService","SPARQL_ENDPOINT_URL"]}(),angular.module("facetApp").run(["$templateCache",function(a){"use strict";a.put("views/cards.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2"> <!-- <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive" /> --> </div><!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --><div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/description.partial.html\'"></div> </div> <div class="col-md-4 pull-md-4 col-lg-3"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-8 col-lg-9"> <b>Order:</b> <span class="sort"> <a href="" ng-click="vm.sortBy(\'?birthDate\')">By Time</a> <span ng-class="vm.getSortClass(\'?birthDate\', true)" class="glyphicon" aria-hidden="true"></span> </span> <span class="sort"> <a href="" ng-click="vm.sortBy(\'?familyName\')">By Family Name</a> <span ng-class="vm.getSortClass(\'?familyName\')" class="glyphicon" aria-hidden="true"></span> </span> <div ng-include="\'views/cards.partial.html\'"></div> </div> </div> </div>'),a.put("views/cards.partial.html",'<img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div infinite-scroll="vm.nextPage()" infinite-scroll-disabled="vm.isScrollDisabled()" infinite-scroll-distance="0"> <div class="row"> <div ng-repeat="person in vm.people" class="person-container"> <div class="col-xs-12 col-sm-12 person-panel col-md-4 col-lg-3"> <div class="thumbnail"> <a ui-sref="person.detail({ personId: person.id })"> <div class="person-profile-img vertical-center"> <img class="img img-responsive center-block media-middle" ng-src="{{ ::person.images | first }}"> </div> </a> <div class="caption"> <div class="visible-caption"> <div class="row"> <div class="col-xs-12 col-sm-3 col-md-12"> <b><a ui-sref="person.detail({ personId: person.id })">{{ ::person.givenName }} {{ ::person.familyName }}</a></b> </div> <div class="col-xs-12 col-sm-9 col-md-12"> <p ng-if="::(person.birthPlace || person.birthDate || person.deathDate)"> &#8727;&nbsp;<span ng-if="::person.birthPlace">{{ ::person.birthPlace }}</span> {{ ::person.birthDate }} <span ng-if="::person.deathDate">&dagger;&nbsp;{{ ::person.deathPlace }}&nbsp;{{ ::person.deathDate }}</span> </p> </div> <div ng-if="::person.occupation" class="col-xs-12"> <p>{{ ::person.occupation | castArray | join:\', \' }}</p> </div> <div class="col-xs-12 icon-menu"> <a title="Data" class="" ng-href="{{ ::person.id }}"><span class="glyphicon glyphicon-hdd" aria-hidden="true"></span></a> </div> </div> <div class="row"> <div ng-if="::person.hasAchievements" class="col-xs-6"> <a href="" class="link" ng-click="vm.getAchievements(person)" uib-popover-template="\'views/achievements-popover.html\'" popover-trigger="\'outsideClick\'" popover-append-to-body="true" popover-placement="auto right">Saavutukset</a> </div> <div ng-if="::person.wikipedia" class="col-xs-6"> <a ng-href="{{ ::person.wikipedia }}">Wikipedia</a> </div> <div ng-if="::person.wikidata" class="col-xs-6"> <a ng-href="{{ ::person.wikidata }}">Wikidata</a> </div> <div ng-if="::person.warsampo" class="col-xs-6"> <a ng-href="http://www.sotasampo.fi/fi/persons/?uri={{ ::person.warsampo }}">Sotasampo</a> </div> <div ng-if="::person.norssi" class="col-xs-6"> <a ng-href="http://www.norssit.fi/semweb/#!/tiedot/http:~2F~2Fldf.fi~2Fnorssit~2F{{ ::person.norssi }}">Norssi</a> </div> <div ng-if="::person.kirjasampo" class="col-xs-6"> <a ng-href="{{ ::person.kirjasampo }}">Kirjasampo</a> </div> <div ng-if="::person.blf" class="col-xs-6"> <a ng-href="{{ ::person.blf }}">BLF</a> </div> <div ng-if="::person.ulan" class="col-xs-6"> <a ng-href="{{ ::person.ulan }}">ULAN</a> </div> <div ng-if="::person.viaf" class="col-xs-6"> <a ng-href="{{ ::person.viaf }}">VIAF</a> </div> <div ng-if="::person.norssit" class="col-xs-6"> <a ng-href="{{ ::person.norssit }}">Norssit</a> </div> <div ng-if="::person.eduskunta" class="col-xs-6"> <a ng-href="{{ ::person.eduskunta }}">Eduskunta</a> </div> <div ng-if="::person.website" class="col-xs-6"> <a ng-href="{{ ::person.website }}">Kotisivu</a> </div> <div ng-if="::person.genicom" class="col-xs-6"> <a ng-href="{{ ::person.genicom }}">Kotisivu (Geni.com)</a> </div> <div ng-if="::person.genitree" class="col-xs-6"> <a ng-href="{{ ::person.genitree }}">Sukupuu (Geni.com)</a> </div> </div> <div ng-if="::person.relative" class="row"> <div class="col-xs-12">Sukulaiset:</div> <div class="col-sm-6 col-md-12" ng-repeat="relative in person.relative | castArray"> {{ ::relative.type }} <a ui-sref="person.detail({ personId: relative.id })">{{ ::relative.name }}</a> </div> </div> <div ng-if="::person.hobby" class="row"> <div class="col-md-12"> <p>Harrastukset: {{ ::person.hobby | castArray | join: \', \' }}</p> </div> </div> <div uib-collapse="!showText"> <hr> <p ng-bind-html="::person.lead_paragraph"></p> </div> </div> </div> </div> </div> <div class="clearfix visible-lg-block" ng-if="($index + 1) % 4 == 0"></div> <div class="clearfix visible-md-block" ng-if="($index + 1) % 3 == 0"></div> <div class="clearfix visible-sm-block" ng-if="($index + 1) % 1 == 0"></div> <div class="clearfix visible-xs-block" ng-if="($index + 1) % 1 == 0"></div> </div> </div> </div>'),a.put("views/description.partial.html","<h1>Congress Legislators</h1> <p> (Edit file 'description.partial.html' to edit this text) Source: <a href=\"https://github.com/unitedstates/congress-legislators\">Members of the United States Congress</a> </p>"),a.put("views/description.statistics.partial.html",'<h1>Semanttinen Kansallisbiografia</h1> <p> Aineistosta luotuja tilastoja. Esitykset luodaan vasemmanpuoleisissa suodattimissa tehtyjen valintojen perusteella. Lähde: <a href="http://www.kansallisbiografia.fi">Kansallisbiografia</a> </p>'),a.put("views/detail.html",'<div class="col-sm-12 col-md-8 text-center" ng-show="vm.person"> <div class="col-sm-12" ng-show="!vm.person && !vm.error"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif"> </div> <h1>{{ vm.person.givenName }} {{ vm.person.familyName }}</h1> <div class="thumbnail"> <div class="person-profile-img"> <div class="row"> <div class="col-sm-12 text-center"> <img ng-repeat="img in vm.person.images" class="person-img img img-responsive" ng-src="{{ img }}"> </div> </div> </div> <div class="caption"> <div class="visible-caption"> <div class="row"> <div class="col-xs-12"> <p ng-if="(vm.person.birthPlace || vm.person.birthDate || vm.person.deathDate)"> <span ng-if="(vm.person.birthPlace || vm.person.birthDate)">&#8727;&nbsp;{{ vm.person.birthPlace }} {{ vm.person.birthDate }}</span> <span ng-if="(vm.person.deathPlace || vm.person.deathDate)">&dagger;&nbsp;{{ vm.person.deathPlace }}</span> <span ng-if="vm.person.deathDate">{{ vm.person.deathDate }}</span> </p> </div> <div ng-if="vm.person.occupation" class="col-xs-12"> <p>{{ vm.person.occupation | castArray | join:\', \' }}</p> </div> <div class="col-xs-12 icon-menu"> <a title="Data" class="" ng-href="{{ vm.person.id }}"><span class="glyphicon glyphicon-hdd" aria-hidden="true"></span></a> </div> </div> <div class="row"> <div ng-if="vm.person.wikipedia" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.wikipedia }}">Wikipedia</a> </div><div ng-if="vm.person.wikidata" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.wikidata }}">Wikidata</a> </div> </div> <div ng-if="vm.person.committee" class="row padded-row"> <div class="col-xs-12"><h4>Member of committees:</h4></div> <p>{{ vm.person.committee.label | castArray | join:\', \' }}</p> </div> <div class="entry-text text-left"> <hr> <p ng-bind-html="vm.person.lead_paragraph"></p> </div> <div ng-if="vm.person.description" class="entry-text text-left"> <hr> <p ng-bind-html="vm.person.description"></p> </div> </div> </div> </div> </div> <div class="col-md-4 text-left" ng-if="vm.person.similar"> <h3>Similar persons</h3> <img ng-if="!vm.person.similar" class="loading-img" src="images/loading-lg.7ba320e0.gif"> <div class="col-sm-6" ng-repeat="person in vm.person.similar"> <a ui-sref="person.detail({ personId: person.prs })">{{ person.label }}</a> </div> </div>  '),a.put("views/facets.partial.html",'<a href="" ng-click="vm.removeFacetSelections()">Remove all selections</a> <div class="facets"> <seco-jena-text-facet data-options="vm.facets.entryText"></seco-jena-text-facet> <div class="show-facets row"> <div class="col-xs-12"> <button class="btn btn-default pull-right visible-xs-block visible-sm-block" ng-click="show = !show">{{ show ? \'Hide the facets\' : \'Show the facets\' }}</button> </div> </div> <div class="hideable-facets" ng-class="{ \'hidden-sm hidden-xs\': !show }"> <seco-checkbox-facet data-options="vm.facets.link"></seco-checkbox-facet> <!--  <seco-basic-facet data-options="vm.facets.occupation"></seco-basic-facet> --> <seco-basic-facet data-options="vm.facets.familyName"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.gender"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.birthYear"></seco-basic-facet> </div> </div>'),a.put("views/groupmap.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12" ng-show="!vm.people && !vm.error"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif"> </div> <div uib-alert ng-if="vm.error"> {{ vm.error }} </div> <div class="container-fluid text-center" ng-show="vm.people"> Kartalla näytetään henkilöiden <span style="color:#777fff">synnyin-</span> ja <span style="color:#ff4141">kuolin</span>paikat. Esitys luodaan vasemmanpuoleisissa suodattimissa tehtyjen valintojen perusteella. Lähde: <a href="http://www.kansallisbiografia.fi">Kansallisbiografia</a> <div class="col-md-4 pull-md-4 col-lg-3"> <div> <br>Rajaa henkilöiden syntymäaika <rzslider rz-slider-model="minRangeSlider.minValue" rz-slider-high="minRangeSlider.maxValue" rz-slider-options="minRangeSlider.options"></rzslider> </div> <div ng-include="\'views/mapfacets.partial.html\'"></div> </div> <div class="container-fluid thumbnail"> <div class="col-md-8 col-lg-9"> <ui-gmap-google-map id="ui-gmap-google-map" center="vm.map.center" zoom="vm.map.zoom"> <ui-gmap-marker ng-repeat="marker in vm.markers" coords="marker" idkey="marker.id" options="marker.options"></ui-gmap-marker> </ui-gmap-google-map> </div> </div> </div> </div> </div>'),a.put("views/help.html",'<div class="modal-header"> <div class="row"> <div class="col-xs-10 text-left"> <h3 class="modal-title">Kansallisbiografia</h3> </div> <div class="col-xs-2"> <a href="#" ng-click="$close()" class="no-decoration btn-lg pull-right glyphicon glyphicon-remove"></a> </div> </div> </div> <div class="modal-body"> <p> Matrikkelin tietoja voi selata käyttöliittymässä käyttämällä vasemmalla olevia suodattimia. Hakeaksesi rekisteristä tekstihaulla, kirjoita haku \'Haku\'-kenttään. Poistaaksesi hakurajauksen, paina X-nappia hakukentän oikealla puolella. Jokaisella suodattimella on oma hakukenttä sekä lista suodattimen vaihtoehdoista, josta voi valita haluamansa ehdon. Tulosten määrä vaihtoehdolla näkyy suluissa valinnan nimen perässä. Valinnan voi poistaa valitsemalla vaihtoehdon \'-- Ei valintaa --\'. Jokaisesta suodattimesta voi valita vain yhden vaihtoehdon, jolloin henkilölistausta suodatetaan valintojen perusteella. Tuloslistaa voi suodattaa käyttäen eri suodattimia yhdessä. </p> <p> <h4>Suodattimien valinta:</h4> <ol> <li>Valitse joku suodattimista ja avaa suodatin painamalla \'+\'-nappia suodattimen otsikon oikealla puolella.</li> <li>Valitse suodattimeen arvo listalta tai hae kirjoittamalla listan yllä olevaan tekstikenttään. Jos suodatinehtoa haetaan tekstikentän avulla alla oleva lista suodattimista päivittyy kirjoittaessa.</li> <li>Suodatinehdon voi valita klikkaamalla sitä listalta, tai poistaa valitsemalla \'-- Ei valintaa --\' listan alusta. </li> <li>Henkilöiden lista päivittyy suodattimien oikealla puolella.</li> <li>Tuloksia voi nyt suodattaa tarvittaessa lisää toistamalla toisella suodattimella edelliset askeleet 1-4.</li> </ol> </p> </div>'),a.put("views/login.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12"> <h1>Kirjaudu</h1> <div ng-show="vm.error" class="alert alert-danger" role="alert">{{ vm.error }}</div> <form> <div class="form-group"> <label for="un">Käyttäjätunnus</label> <input ng-model="vm.un" type="text" class="form-control" id="un" placeholder="Username"> </div> <div class="form-group"> <label for="pw">Salasana</label> <input ng-model="vm.pw" type="password" class="form-control" id="pw" placeholder="Password"> </div> <button ng-click="vm.login()" type="submit" class="btn btn-default">Submit</button> </form> </div> </div> </div>'),a.put("views/map.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12" ng-show="!vm.person && !vm.error"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif"> </div> <div uib-alert ng-if="vm.error"> {{ vm.error }} </div> <div class="container-fluid text-center" ng-show="vm.person"> <h1>{{ vm.person.givenName }} {{ vm.person.familyName }}</h1> <div class="container-fluid thumbnail"> <div> <div id="labelcontainer" class="col-sm-4 col-md-2 text-center" ng-show="vm.person"> <p ng-repeat="event in ::vm.events" class="{{event.class}}" ng-mouseenter="vm.focusEvent(event)" ng-mouseleave="vm.unfocusEvent(event)"> <a ng-if="::event.relativelink" ng-href="{{event.relativelink}}">{{ event.id }}: {{ event.label }}</a> <span ng-if="::!event.relativelink">{{ event.id }}: {{ event.label }}</span> </p> </div> </div> <div class="col-sm-12 col-md-10 text-center"> <ui-gmap-google-map id="ui-gmap-google-map" center="vm.map.center" zoom="vm.map.zoom"> <ui-gmap-marker ng-repeat="marker in vm.markers" coords="marker" idkey="marker.id" options="marker.options"></ui-gmap-marker> </ui-gmap-google-map> <svg id="timelinecontainer" viewbox="-15,-7,120,27" preserveaspectratio="none" version="1.0" x="0" y="0" width="900" height="180" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <line ng-repeat="line in ::vm.mainline.lines" ng-attr-x1="{{ line.x1 }}" ng-attr-x2="{{ line.x2 }}" ng-attr-y1="{{ line.y1 }}" ng-attr-y2="{{ line.y2 }}"> </line> <text ng-repeat="text in ::vm.mainline.texts" ng-attr-x="{{ text.x }}" ng-attr-y="{{ text.y }}"> {{ text.year }} </text> <path ng-repeat="event in vm.events" ng-mouseenter="vm.focusEvent(event)" ng-mouseleave="vm.unfocusEvent(event)" class="{{ event.class }}" ng-attr-d="{{ event.path }}"> </path> </svg> <p> <span>{{ vm.currentEvent }}</span> </p> </div> </div> </div> </div> </div>'),a.put("views/mapfacets.partial.html",'<a href="" ng-click="vm.removeFacetSelections()">Poista kaikki valinnat</a> <div class="facets"> <seco-jena-text-facet data-options="vm.facets.entryText"></seco-jena-text-facet> <div class="show-facets row"> <div class="col-xs-12"> <button class="btn btn-default pull-right visible-xs-block visible-sm-block" ng-click="show = !show">{{ show ? \'Piilota fasetit\' : \'Näytä fasetit\' }}</button> </div> </div> <div class="hideable-facets" ng-class="{ \'hidden-sm hidden-xs\': !show }"> <seco-checkbox-facet data-options="vm.facets.link"></seco-checkbox-facet> <!--  <seco-basic-facet data-options="vm.facets.occupation"></seco-basic-facet> \n    <seco-basic-facet data-options="vm.facets.period"></seco-basic-facet> --> <seco-basic-facet data-options="vm.facets.gender"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.dataset"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.category"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.company"></seco-basic-facet> <seco-hierarchy-facet data-options="vm.facets.title"></seco-hierarchy-facet> <seco-basic-facet data-options="vm.facets.place"></seco-basic-facet> </div> </div>'),a.put("views/page-modal.html",'<div class="modal-header"> <div class="row"> <div class="col-xs-8"> <h3 class="modal-title">{{ $ctrl.person.ordinal }} {{ $ctrl.person.givenName }} {{ $ctrl.person.familyName }}</h3> </div> <div class="col-xs-4 text-right"> <button class="btn btn-default" ng-click="$ctrl.previousPage()" ng-disabled="$ctrl.pageNo === 1" aria-label="Edellinen sivu"> <span class="glyphicon glyphicon-step-backward"></span> </button> <span>{{ $ctrl.pageNo }}</span> <button class="btn btn-default" ng-click="$ctrl.nextPage()" ng-disabled="$ctrl.pageNo === 716" aria-label="Seuraava sivu"> <span class="glyphicon glyphicon-step-forward"></span> </button> <button ng-click="$ctrl.close()" class="btn btn-default" aria-label="Sulje"> <span aria-hidden="true" class="glyphicon glyphicon-remove"></span> </button> </div> </div> </div><div class="modal-body"> <img class="img img-responsive" ng-src="{{ $ctrl.pageUrl }}"> </div>'),a.put("views/person.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12"> <ul class="nav nav-tabs"> <li ui-sref="person.detail" ui-sref-active="active"> <a href=""><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Personal Information</a> </li> <li ui-sref="person.map" ui-sref-active="active"> <a href=""><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> Timeline</a> </li> </ul> </div> </div> <div class="row"> <div ui-view></div> </div> </div>'),a.put("views/profile-image-popover.html",'<div> <img class="img img-responsive" ng-src="{{ img }}"> </div>'),a.put("views/subnavbar.html",'<ul class="nav navbar-nav"> <li><a href="" id="show-help" ng-click="vm.showHelp()"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> Help</a></li> <li ui-sref-active="active"><a ui-sref="cards"><span class="glyphicon glyphicon-th" aria-hidden="true"></span> Grid</a></li> <li ui-sref-active="active"><a ui-sref="table"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span> List</a></li> <li ui-sref-active="active"><a ui-sref="groupmap"><span class="glyphicon glyphicon glyphicon-globe" aria-hidden="true"></span> Map</a></li> <li class="dropdown" ui-sref-active="{\'active\': \'visualizations.**\'}"> <a class="dropdown-toggle" data-toggle="dropdown" href="" id="statistics"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Statistics<span class="caret"></span></a> <ul class="dropdown-menu"> <li ui-sref-active="active"><a ui-sref="visualizations.visu2"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Statistics</a></li> </ul> </li> </ul>'),a.put("views/table.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2"> <!-- <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive" /> --> </div><!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --><div class="col-xs-8 col-md-7 col-lg-8 vcenter push-xs-8"> <div ng-include="\'views/description.partial.html\'"></div> </div> <div class="col-md-4 pull-md-4 col-lg-3"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-8 col-lg-9"> Order: <span class="sort"> <a href="" ng-click="vm.sortBy(\'?birthDate\')">By Time</a> <span ng-class="vm.getSortClass(\'?birthDate\', true)" class="glyphicon" aria-hidden="true"></span> </span> <span class="sort"> <a href="" ng-click="vm.sortBy(\'?familyName\')">By Family Name</a> <span ng-class="vm.getSortClass(\'?familyName\')" class="glyphicon" aria-hidden="true"></span> </span> <div ng-include="\'views/table.partial.html\'"></div> </div> </div> </div>'),a.put("views/table.partial.html",'<table class="table table-striped norssi-table ng-table-responsive" ng-table="vm.tableParams"> <thead> <tr> <th class="col-xs-4">Name</th> <th class="col-xs-1">Person</th> <th class="col-xs-1">Links</th> <th class="col-xs-3"><span class="hidden-xs hidden-sm">Else</span></th> <th class="col-xs-3 hidden-xs hidden-sm">Description</th> </tr> </thead> <tbody> <tr ng-show="!vm.isLoadingResults" ng-repeat="person in $data"> <td class="person-image-container" data-title="\'Nimi\'"> <div ng-class="::{ \'name-col col-md-12 col-lg-7\': person.images }"> <b><a ui-sref="person.detail({ personId: person.id })">{{ ::person.givenName }} {{ ::person.familyName }}</a></b><br> <span ng-if="::(person.birthDate)">&#8727;&nbsp;{{ ::person.birthPlace }} {{ ::person.birthDate }}</span> <span ng-if="::person.deathDate">&dagger;&nbsp;{{ ::person.deathPlace }} {{ ::person.deathDate }}</span> <br> <span class="icon-menu"> <a title="Data" class="" ng-href="{{ ::person.id }}"><span class="glyphicon glyphicon-hdd" aria-hidden="true"></span></a> </span> </div> <div ng-if="::person.hasImage" class="name-col col-md-12 col-lg-5"> <div ng-repeat="img in ::person.images" ng-class="{ \'col-md-12\': ($first && $last), \'col-sm-6\': !($first && $last) }" class="person-img-col vcenter"> <img uib-popover-template="\'views/profile-image-popover.html\'" popover-trigger="\'mouseenter\'" popover-placement="auto right" popover-append-to-body="true" class="person-image img img-responsive" ng-src="{{ img  }}"> </div> </div> </td> <td class="links" data-title="\'Henkilö\'"> <div ng-if="::person.occupation" class="hidden-xs hidden-sm"> <p>{{ ::person.occupation | castArray | join:\', \' }}</p> </div> </td> <td class="links" data-title="\'Linkit\'"> <a class="link" ng-if="::person.wikipedia" ng-href="{{ ::person.wikipedia }}">Wikipedia</a> <a class="link" ng-if="::person.genicom" ng-href="{{ ::person.genicom }}">Kotisivu (Geni.com)</a> <a class="link" ng-if="::person.genitree" ng-href="{{ ::person.genitree }}">Sukupuu (Geni.com)</a> </td> <td data-title="\'Else\'"> <div ng-if="::person.relative"> <span>Relatives: </span><br> <span ng-repeat="relative in person.relative | castArray"> {{ ::relative.type }} <a ui-sref="person.detail({ personId: relative.id })">{{ ::relative.name }}</a> </span> </div> </td> <td data-title="\'Description\'" class="hidden-xs hidden-sm"><p ng-bind-html="::person.lead_paragraph"></p></td> </tr> </tbody> </table> <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults">'),a.put("views/visu.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2"> <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive"> </div><!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --><div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/description.statistics.partial.html\'"></div> </div> <div class="col-md-3 pull-md-3 col-lg-2"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-9 col-lg-10" min-height="500"> Työn alla - under construction <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div id="chart_education" style="width: 100%; height: 500px"></div> <div id="chart_eduorganization" style="width: 100%; height: 500px"></div> <div id="chart_occupation" style="width: 100%; height: 500px"></div> <div id="chart_organization" style="width: 100%; height: 500px"></div> <p style="font-family: Arial; font-size:15px; color:black"><strong>Oppilaitoksista saatuja oppiarvoja</strong></p> <div id="chart_sankey" style="width: 100%; height: 700px"></div> </div> </div> </div>'),a.put("views/visu2.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2"> <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive"> </div><!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --><div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/description.statistics.partial.html\'"></div> </div> <div class="col-md-3 pull-md-3 col-lg-2"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-9 col-lg-10" min-height="500"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div id="chart_age"></div> <div id="chart_marriageAge"></div> <div id="chart_firstChildAge"></div> <div id="chart_numberOfChildren"></div> <div id="chart_numberOfSpouses"></div> <!-- \n         <div id="chart_matriculationYear"></div>\n         <div id="chart_topschools" style="width: 100%; height: 500px;"></div>\n         <div id="chart_toporganization" style="width: 100%; height: 500px;"></div>\n         <div id="chart_topeducation" style="width: 100%; height: 500px;"></div>\n          --> </div> </div> </div>');
}]);